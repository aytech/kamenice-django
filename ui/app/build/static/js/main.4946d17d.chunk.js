(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{302:function(e,t,n){},304:function(e,t,n){},416:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){},511:function(e,t,n){"use strict";n.r(t);var a,r,i,s,o,c=n(268),l=n(29),d=n(43),u=n.n(d),j=n(61),b=(n(302),function(e){if(document.cookie&&""!==document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var a=t[n].trim();if(a.substring(0,e.length+1)===e+"=")return decodeURIComponent(a.substring(e.length+1))}return null}),m=n(39),O=n.n(m),v=(n(303),n(533)),h=n(142),p=n(524),f=n(530),g=n(534),x=n(525),y=n(526),I=n(282),k=n(18),S=n(518),C=n(540),N=n(0),F=n(42),z=(n(304),n.p+"static/media/mill.1f872c17.svg"),T=n(551),w=n(549),D=n(548),R=n(547),E=n(544),q=n(287),A=n(274),M=n(225),G=n(543),P={colors:["#f5222d","#fa541c","#fa8c16","#faad14","#fadb14","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96"],getRandomColor:function(){return P.colors[Math.floor(Math.random()*P.colors.length)]},getReservationColor:function(e){switch(e){case"NONBINDING":return"rgb(254, 223, 3)";case"ACCOMMODATED":return"rgb(0, 133, 182)";case"INHABITED":return"rgb(254, 127, 45)";case"BINDING":default:return"rgb(0, 212, 157)"}}},H=function(){var e=window.location.search.substring(1).split("=");return e.length>=2&&void 0!==e[1]?e[1]:"/"},$="YYYY-MM-DD HH:mm",B="Please enter valid credentials",U="Refresh token is expired",V="Signature has expired",L="Unauthorized",_="/guests",X="/login",Z="/rezervace/:hash/hoste",K="/",Y="/apartma",J="refreshToken",W="token",Q="username",ee=n(35),te=n(537),ne=Object(te.a)(a||(a=Object(ee.a)(["\n  mutation TokenAuth($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      payload\n      refreshExpiresIn\n      refreshToken\n      token\n    }\n  }\n"]))),ae=Object(te.a)(r||(r=Object(ee.a)(["\n  mutation RefreshToken($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      payload\n      refreshExpiresIn\n      refreshToken\n      token\n    }\n  }\n"]))),re=Object(te.a)(i||(i=Object(ee.a)(["\n  mutation RevokeToken($refreshToken: String!) {\n    revokeToken(refreshToken: $refreshToken) {\n      revoked\n    }\n  }\n"]))),ie=n(4),se=Object(F.g)((function(e){var t=e.history,n=e.user,a=Object(G.a)().t,r=Object(E.a)(re),i=Object(k.a)(r,2),s=i[0],o=i[1].loading,c=Object(N.useCallback)((function(){localStorage.removeItem(Q),t.push("/login?next=".concat(H()))}),[t]),l=null!==n?Object(ie.jsx)(q.a,{size:32,style:{backgroundColor:P.getRandomColor()},children:n.username.substring(0,1).toUpperCase()}):null;return null!==n?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(A.a,{spinning:o,children:Object(ie.jsxs)(M.a,{mode:"horizontal",children:[Object(ie.jsx)(M.a.Item,{icon:Object(ie.jsx)(T.a,{}),children:Object(ie.jsx)(j.b,{to:"/",children:a("reservations.name")})},"reservation"),Object(ie.jsx)(M.a.Item,{icon:Object(ie.jsx)(w.a,{}),children:Object(ie.jsx)(j.b,{to:"/guests",children:a("guests.name-pl")})},"guests"),Object(ie.jsx)(M.a.Item,{icon:Object(ie.jsx)(D.a,{}),children:Object(ie.jsx)(j.b,{to:"/apartma",children:a("rooms")})},"suites")]})}),Object(ie.jsx)(M.a,{className:"user",mode:"horizontal",children:Object(ie.jsx)(M.a.SubMenu,{title:l,children:Object(ie.jsx)(M.a.Item,{icon:Object(ie.jsx)(R.a,{}),onClick:function(){var e=localStorage.getItem(J);null!==e?s({variables:{refreshToken:e}}).then((function(){localStorage.removeItem(W),localStorage.removeItem(J)})).finally((function(){return c()})):c()},children:a("logout")},"logout")},"user-sub")})]}):null})),oe=n(531),ce=function(e){var t=e.user,n=Object(ie.jsx)("img",{className:"logo",src:z,alt:"Kamenice logo"});return Object(ie.jsxs)(oe.a,{children:[null!==t?Object(ie.jsx)(j.b,{to:"/",children:n}):n,Object(ie.jsx)(se,{user:t})]})},le=n(538),de=n(57),ue=Object(F.g)((function(e){var t=e.history,n=Object(G.a)().t;return Object(ie.jsx)(S.a,{children:Object(ie.jsx)(S.a.Content,{children:Object(ie.jsx)(le.a,{status:"404",title:n("errors.oops"),subTitle:n("errors.404"),extra:Object(ie.jsx)(de.a,{onClick:function(){return t.push("/")},type:"primary",children:n("go-home")})})})})})),je=n(88),be=n.n(je),me=n(123),Oe=n.n(me),ve=(n(415),n(416),n(273)),he=n(276),pe=n.n(he),fe=function(e){var t=e.item,n=e.itemContext,a=e.getItemProps,r=e.getResizeProps,i=Object(G.a)().t,s=r(),o=s.left,c=s.right;return void 0!==t.itemProps?Object(ie.jsxs)("div",Object(l.a)(Object(l.a)({},a(t.itemProps)),{},{children:[n.useResizeHandle?Object(ie.jsx)("div",Object(l.a)({},o)):"",Object(ie.jsx)(ve.a,{title:t.title,content:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{style:{color:t.color,fontWeight:700},children:i("reservation-types.".concat(t.type))}),Object(ie.jsxs)("div",{children:[i("from"),": ",Object(ie.jsx)("strong",{children:t.start_time.format("DD MMM HH:mm")})]}),Object(ie.jsxs)("div",{children:[i("to"),": ",Object(ie.jsx)("strong",{children:t.end_time.format("DD MMM HH:mm")})]})]}),children:Object(ie.jsx)("div",{className:"rct-item-content",style:{maxHeight:"".concat(n.dimensions.height)},children:Object(ie.jsx)(pe.a,{strong:!0,children:t.title})})}),n.useResizeHandle?Object(ie.jsx)("div",Object(l.a)({},c)):""]})):null},ge=n(290),xe=n(288),ye=n(528),Ie=n(519),ke=n(535),Se=n(527),Ce=n(152),Ne=n(541),Fe=n(532),ze=n(521),Te=n(522),we=n(546),De=n(545),Re=n(520),Ee=n(552),qe=n(550),Ae=(n(502),function(e){switch(e){case"NONBINDING":return"Nez\xe1vazn\xe1 Rezervace";case"ACCOMMODATED":return"Aktu\xe1ln\u011b Ubytov\xe1n\xed";case"INHABITED":return"Obydlen\xfd Term\xedn";case"BINDING":default:return"Z\xe1vazn\xe1 Rezervace"}});!function(e){e.ADULT="ADULT",e.CHILD="CHILD",e.INFANT="INFANT",e.YOUNG="YOUNG"}(s||(s={})),function(e){e.F="F",e.M="M"}(o||(o={}));var Me,Ge,Pe,He,$e,Be,Ue,Ve,Le,_e,Xe,Ze,Ke,Ye,Je,We={mealOptions:[{label:"Bez Stravy",value:"NOMEAL"},{label:"Jen Sn\xeddan\u011b",value:"BREAKFAST"},{label:"Polopenze",value:"HALFBOARD"}],reservationOptions:[{label:Ae("BINDING"),value:"BINDING"},{label:Ae("NONBINDING"),value:"NONBINDING"},{label:Ae("ACCOMMODATED"),value:"ACCOMMODATED"},{label:Ae("INHABITED"),value:"INHABITED"}],getRequiredRule:function(e){return{required:!0,message:e}}},Qe={requiredRule:function(e){return{required:!0,message:e}},trim:function(e){return void 0===e?e:e.trim()}},et=n(539),tt=n(536),nt=n(554),at=n(553),rt={ageOptions:[{label:"12+",value:"YOUNG"},{label:"3-12 let",value:"CHILD"},{label:"Do 3 let",value:"INFANT"},{label:"Dosp\u011bl\xfd",value:"ADULT"}],requiredAlphaRule:function(e){return{message:e,pattern:/^([A-Za-z\s\xe1\xc1\u010d\u010c\u010f\u010e\xe9\xc9\u011b\u011a\xed\xcd\u0148\u0147\u0159\u0158\u0161\u0160\u0165\u0164\xfa\xda\u016f\u016e\xfd\xdd\u017e\u017d\xf3\xd3])+$/,transform:Qe.trim}}},it=(n(503),Object(te.a)(Me||(Me=Object(ee.a)(["\n  mutation CreateGuest($data: GuestInput!) {\n    createGuest(data: $data) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"])))),st=Object(te.a)(Ge||(Ge=Object(ee.a)(["\n  mutation UpdateGuest($data: GuestInput!) {\n    updateGuest(data: $data) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"]))),ot=Object(te.a)(Pe||(Pe=Object(ee.a)(["\n  mutation DeleteGuest($guestId: ID!) {\n    deleteGuest(guestId: $guestId) {\n      guest {\n        id\n      }\n    }\n  }\n"]))),ct=function(e){var t=e.addGuest,n=e.close,a=e.guest,r=e.removeGuest,i=e.visible,s=Object(G.a)().t,o=ye.a.useForm(),c=Object(k.a)(o,1)[0],d=function(e){return xe.b.error(e.message)},u=Object(E.a)(it,{onError:d}),j=Object(k.a)(u,2),b=j[0],m=j[1].loading,O=Object(E.a)(st,{onError:d}),v=Object(k.a)(O,2),h=v[0],p=v[1].loading,f=Object(E.a)(ot,{onError:d}),g=Object(k.a)(f,2),x=g[0],y=g[1].loading,I=Object(N.useState)(!1),S=Object(k.a)(I,2),C=S[0],F=S[1],z={age:null===a||void 0===a?void 0:a.age,address:{municipality:null===a||void 0===a?void 0:a.addressMunicipality,psc:null===a||void 0===a?void 0:a.addressPsc,street:null===a||void 0===a?void 0:a.addressStreet},citizenship:{selected:null===a||void 0===a?void 0:a.citizenship},email:null===a||void 0===a?void 0:a.email,gender:null===a||void 0===a?void 0:a.gender,identity:null===a||void 0===a?void 0:a.identity,name:null===a||void 0===a?void 0:a.name,phone:null===a||void 0===a?void 0:a.phoneNumber,surname:null===a||void 0===a?void 0:a.surname,visa:null===a||void 0===a?void 0:a.visaNumber},T=Object(ie.jsx)(ye.a.Item,{name:"email-prefix",noStyle:!0,children:Object(ie.jsx)(nt.a,{})});return Object(N.useEffect)((function(){!0===i&&c.resetFields()}),[c,i]),Object(ie.jsx)(et.a,{closeIcon:Object(ie.jsx)(Ie.a,{onCancel:function(){return F(!1)},onConfirm:function(){F(!1),c.resetFields(),n()},placement:"rightTop",title:s("forms.close-dirty"),visible:C,children:Object(ie.jsx)(Re.a,{onClick:function(){c.isFieldsTouched()?F(!0):n()}})}),placement:"left",title:s("guests.name"),width:500,visible:i,footer:Object(ie.jsxs)(ie.Fragment,{children:[void 0!==a&&null!==a&&Object(ie.jsx)(Ie.a,{cancelText:s("no"),icon:Object(ie.jsx)(at.a,{}),okText:s("yes"),onConfirm:function(){x({variables:{guestId:a.id}}).then((function(e){var t,a,i=null===(t=e.data)||void 0===t||null===(a=t.deleteGuest)||void 0===a?void 0:a.guest;void 0!==r&&void 0!==i&&null!==i&&(r(i.id),xe.b.success(s("guests.deleted")),n())}))},title:s("forms.delete-confirm"),children:Object(ie.jsx)(de.a,{danger:!0,style:{float:"left"},type:"primary",children:s("forms.delete")})}),Object(ie.jsx)(de.a,{onClick:function(){c.validateFields().then((function(){var e,r,i,o,d,u=c.getFieldsValue(!0),j={age:u.age,addressMunicipality:null===(e=u.address)||void 0===e?void 0:e.municipality,addressPsc:null===(r=u.address)||void 0===r?void 0:r.psc,addressStreet:null===(i=u.address)||void 0===i?void 0:i.street,citizenship:void 0===(null===(o=u.citizenship)||void 0===o?void 0:o.selected)?null===(d=u.citizenship)||void 0===d?void 0:d.new:u.citizenship.selected,email:u.email,gender:u.gender,identity:u.identity,name:u.name,phoneNumber:u.phone,surname:u.surname,visaNumber:u.visa};void 0===a||null===a?b({variables:{data:Object(l.a)({},j)}}).then((function(e){var a,r,i=null===(a=e.data)||void 0===a||null===(r=a.createGuest)||void 0===r?void 0:r.guest;void 0!==i&&null!==i&&(t(i),xe.b.success(s("guests.added",{name:i.name,surname:i.surname}))),n()})):h({variables:{data:Object(l.a)({id:String(a.id)},j)}}).then((function(e){var a,r,i=null===(a=e.data)||void 0===a||null===(r=a.updateGuest)||void 0===r?void 0:r.guest;void 0!==i&&null!==i&&(t(i),xe.b.success(s("guests.updated",{name:i.name,surname:i.surname}))),n()}))})).catch((function(){return xe.b.error(s("errors.invalid-form"))}))},type:"primary",children:s(void 0===a||null===a?"forms.create":"forms.update")})]}),footerStyle:{padding:"16px 20px",textAlign:"right"},children:Object(ie.jsx)(tt.a,{active:!0,loading:m||p||y,paragraph:{rows:15},children:Object(ie.jsxs)(ye.a,{form:c,initialValues:z,layout:"vertical",name:"guest",children:[Object(ie.jsx)(be.a,{level:5,children:s("forms.personal-data")}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("name"),name:"name",required:!0,rules:[Qe.requiredRule(s("forms.field-required")),rt.requiredAlphaRule(s("forms.enter-text"))],children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.your-name")})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("surname"),name:"surname",required:!0,rules:[Qe.requiredRule(s("forms.field-required")),rt.requiredAlphaRule(s("forms.enter-text"))],children:Object(ie.jsx)(Fe.a,{placeholder:s("your-surname")})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("email"),name:"email",required:!0,rules:[Qe.requiredRule(s("forms.field-required"))],children:Object(ie.jsx)(Fe.a,{addonBefore:T,placeholder:s("email"),type:"email"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("forms.id-number"),name:"identity",children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.id-number-full")})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("phone-number"),name:"phone",children:Object(ie.jsx)(Fe.a,{placeholder:s("number")})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("age"),name:"age",children:Object(ie.jsx)(Ce.a,{options:rt.ageOptions,placeholder:s("forms.choose-from-list")})}),Object(ie.jsx)(ye.a.Item,{label:s("sex"),name:"gender",children:Object(ie.jsxs)(Ce.a,{placeholder:s("forms.choose-from-list"),children:[Object(ie.jsx)(Ce.a.Option,{value:"M",children:s("man")}),Object(ie.jsx)(Ce.a.Option,{value:"F",children:s("woman")})]})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("forms.visa-number"),name:"visa",children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.visa-number")})}),Object(ie.jsx)(be.a,{level:5,children:s("forms.address")}),Object(ie.jsx)(ye.a.Item,{label:s("forms.street"),name:["address","street"],children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.street")})}),Object(ie.jsx)(ye.a.Item,{label:s("forms.psc-label"),children:Object(ie.jsxs)(Fe.a.Group,{compact:!0,children:[Object(ie.jsx)(ye.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","psc"],children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.psc")})}),Object(ie.jsx)(ye.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","municipality"],children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.municipality")})})]})}),Object(ie.jsx)(ye.a.Item,{label:s("forms.citizenship"),children:Object(ie.jsxs)(Fe.a.Group,{compact:!0,children:[Object(ie.jsx)(ye.a.Item,{style:{width:"50%"},name:["citizenship","selected"],children:Object(ie.jsxs)(Ce.a,{style:{width:"100%"},placeholder:s("forms.from-list"),children:[Object(ie.jsx)(Ce.a.Option,{value:"cze",children:"CZE"}),Object(ie.jsx)(Ce.a.Option,{value:"sk",children:"SK"})]})}),Object(ie.jsx)(ye.a.Item,{style:{width:"50%"},name:["citizenship","new"],children:Object(ie.jsx)(Fe.a,{placeholder:s("forms.by-hand")})})]})})]})})})},lt=Object(te.a)(He||(He=Object(ee.a)(["\n  query Guests {\n    guests {\n      age\n      addressMunicipality\n      addressPsc\n      addressStreet\n      citizenship\n      email\n      gender\n      identity\n      id\n      name\n      phoneNumber\n      surname\n      visaNumber\n    }\n  }\n"]))),dt=Object(te.a)($e||($e=Object(ee.a)(["\n  mutation CreateReservation($data: ReservationInput!) {\n    createReservation(data: $data) {\n      reservation {\n        fromDate\n        id\n        guest {\n          id\n          name\n          surname\n        }\n        meal\n        notes\n        purpose\n        roommates {\n          id\n          name\n          surname\n        }\n        suite {\n          id\n          number\n          title\n        }\n        toDate\n        type\n      }\n    }\n  }\n"]))),ut=Object(te.a)(Be||(Be=Object(ee.a)(["\n  mutation DeleteReservation($reservationId: ID!) {\n    deleteReservation(reservationId: $reservationId) {\n      reservation {\n        id\n      }\n    }\n  }\n"]))),jt=Object(te.a)(Ue||(Ue=Object(ee.a)(["\n  mutation UpdateReservation($data: ReservationInput!) {\n    updateReservation(data: $data) {\n      reservation {\n        fromDate\n        id\n        guest {\n          id\n          name\n          surname\n        }\n        meal\n        notes\n        purpose\n        roommates {\n          id\n          name\n          surname\n        }\n        suite {\n          id\n          number\n          title\n        }\n        toDate\n        type\n      }\n    }\n  }\n"]))),bt=["key","name","fieldKey"],mt=function(e){var t=e.addOrUpdateReservation,n=e.close,a=e.isOpen,r=e.clearReservation,i=e.reservation,s=Object(G.a)().t,o=function(e){return xe.b.error(e.message)},c=Object(E.a)(dt,{onCompleted:function(e){var a;t(null===(a=e.createReservation)||void 0===a?void 0:a.reservation),xe.b.success(s("reservation-created")),n()},onError:o}),d=Object(k.a)(c,2),u=d[0],j=d[1].loading,b=Object(E.a)(ut,{onCompleted:function(e){var t,a;r(null===(t=e.deleteReservation)||void 0===t||null===(a=t.reservation)||void 0===a?void 0:a.id),xe.b.success(s("reservation-deleted")),n()},onError:o}),m=Object(k.a)(b,2),O=m[0],v=m[1].loading,h=Object(E.a)(jt,{onCompleted:function(e){var a;t(null===(a=e.updateReservation)||void 0===a?void 0:a.reservation),xe.b.success(s("reservation-updated")),n()},onError:o}),p=Object(k.a)(h,2),f=p[0],g=p[1].loading,x=Object(ze.a)(lt,{onError:o}),y=Object(k.a)(x,2),I=y[0],S=y[1],C=S.loading,F=S.data,z=Object(N.useState)(!1),T=Object(k.a)(z,2),w=T[0],D=T[1],R=Object(N.useState)(!1),q=Object(k.a)(R,2),M=q[0],P=q[1],H=Object(N.useState)([]),B=Object(k.a)(H,2),U=B[0],V=B[1],L=ye.a.useForm(),_=Object(k.a)(L,1)[0],X=void 0!==i?{dates:[i.fromDate,i.toDate],guest:void 0===i.guest?null:i.guest.id,meal:i.meal,notes:i.notes,purpose:i.purpose,roommates:Array.from(i.roommates,(function(e){return{id:e.id}})),type:i.type}:{type:"NONBINDING"},Z=function(e){return{label:"".concat(e.name," ").concat(e.surname),value:e.id}},K=function(){var e=_.getFieldsValue(!0),t=_.getFieldValue("dates"),n=Object(k.a)(t,2),a=n[0],r=n[1],s=void 0===e.roommates?[]:Array.from(e.roommates,(function(e){return e.id})),o={fromDate:a.format($),guest:e.guest,meal:e.meal,notes:e.notes,purpose:e.purpose,roommates:s,suite:void 0!==i?+i.suite.id:null,toDate:r.format($),type:e.type};void 0!==i&&void 0!==i.id?f({variables:{data:Object(l.a)({id:String(i.id)},o)}}):u({variables:{data:Object(l.a)({},o)}})},Y=[{message:s("forms.guest-duplicate"),validator:function(e,t){var n=_.getFieldValue("roommates");if(void 0===n||0===n.length)return Promise.resolve();var a=n.filter((function(e){return void 0!==e&&e.id===t}));return void 0===a||0===a.length?Promise.resolve():Promise.reject(new Error("Fail guest validation, equals to roommate"))}},{message:s("forms.choose-guest"),required:!0}],J=[{message:s("forms.guest-selected"),validator:function(e,t){var n=_.getFieldValue("roommates").filter((function(e){return void 0!==e&&e.id===t}));return void 0===n||n.length<=1?Promise.resolve():Promise.reject(new Error("Fail roommate validation, duplicate value"))}},{message:s("forms.guest-equals-roommate"),validator:function(e,t){return _.getFieldValue("guest")!==t?Promise.resolve():Promise.reject(new Error("Fail roommate validation, equals to guest"))}}],W=[void 0!==i&&void 0!==i.id?Object(ie.jsx)(Ie.a,{cancelText:s("no"),okText:s("yes"),onConfirm:function(){void 0!==i.id&&O({variables:{reservationId:String(i.id)}})},title:"".concat(s("reservations.remove"),"?"),children:Object(ie.jsx)(de.a,{className:"cancel-button",danger:!0,icon:Object(ie.jsx)(Te.a,{}),children:s("forms.delete")})},"remove"):null,Object(ie.jsx)(de.a,{onClick:function(){return P(!0)},children:s("guests.add")},"guest"),Object(ie.jsx)(de.a,{icon:void 0===i?Object(ie.jsx)(we.a,{}):Object(ie.jsx)(De.a,{}),onClick:function(){_.validateFields().then(K)},type:"primary",children:void 0!==i&&void 0!==i.id?s("forms.update"):s("forms.save")},"create")];return Object(N.useEffect)((function(){!0===a&&(_.resetFields(),I())}),[_,I,a,i]),Object(N.useEffect)((function(){if(void 0!==F&&null!==F.guests){var e=[];F.guests.forEach((function(t){null!==t&&e.push(Z(t))})),V(e)}}),[F]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(ke.a,{closeIcon:Object(ie.jsx)(Ie.a,{onCancel:function(){return D(!1)},onConfirm:function(){D(!1),setTimeout(n)},title:s("forms.close-dirty"),visible:w,children:Object(ie.jsx)(Re.a,{onClick:function(){_.isFieldsTouched()?D(!0):n()}})}),footer:W,title:s("reservations.form"),visible:a,children:Object(ie.jsx)(A.a,{spinning:C||j||v||g,tip:"".concat(s("loading"),"..."),children:Object(ie.jsxs)(ye.a,{form:_,initialValues:X,layout:"vertical",children:[Object(ie.jsx)(ye.a.Item,{label:s("reservations.date"),name:"dates",required:!0,children:Object(ie.jsx)(Se.a.RangePicker,{format:$,showTime:!0})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("guests.name"),name:"guest",required:!0,rules:Y,children:Object(ie.jsx)(Ce.a,{filterOption:function(e,t){var n,a=null===t||void 0===t||null===(n=t.label)||void 0===n?void 0:n.toString().toLowerCase().indexOf(e.toLowerCase());return void 0!==a&&a>=0},options:U,showSearch:!0})}),Object(ie.jsx)(ye.a.List,{name:"roommates",children:function(e,t){var n=t.add,a=t.remove;return Object(ie.jsxs)(ie.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name,r=e.fieldKey,i=Object(ge.a)(e,bt);return Object(ie.jsxs)(Ne.b,{align:"baseline",className:"roommate-list",children:[Object(ie.jsx)(ye.a.Item,Object(l.a)(Object(l.a)({hasFeedback:!0},i),{},{fieldKey:[r,"first"],name:[n,"id"],rules:J,children:Object(ie.jsx)(Ce.a,{options:U,showSearch:!0})})),Object(ie.jsx)(Ee.a,{onClick:function(){a(n),_.validateFields()}})]},t)})),Object(ie.jsx)(ye.a.Item,{children:Object(ie.jsx)(de.a,{disabled:e.length>=U.length,type:"dashed",onClick:function(){return n()},block:!0,icon:Object(ie.jsx)(qe.a,{}),children:s("reservations.add-roommate")})})]})}}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("reservations.type"),name:"type",required:!0,rules:[We.getRequiredRule(s("reservations.choose-type"))],children:Object(ie.jsx)(Ce.a,{options:We.reservationOptions})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:s("reservations.meal"),name:"meal",required:!0,rules:[Qe.requiredRule(s("forms.field-required"))],children:Object(ie.jsx)(Ce.a,{options:We.mealOptions})}),Object(ie.jsx)(ye.a.Item,{label:s("reservations.purpose"),name:"purpose",children:Object(ie.jsx)(Fe.a,{placeholder:s("reservations.purpose")})}),Object(ie.jsx)(ye.a.Item,{label:s("reservations.notes"),name:"notes",children:Object(ie.jsx)(Fe.a.TextArea,{placeholder:s("forms.enter-text"),allowClear:!0})})]})})}),Object(ie.jsx)(ct,{close:function(){return P(!1)},addGuest:function(e){V(U.concat(Z(e)))},visible:M})]})},Ot=n(523),vt=Object(te.a)(Ve||(Ve=Object(ee.a)(["\n  query Suites {\n    suites {\n      id\n      title\n      number\n    }\n  }\n"]))),ht=Object(te.a)(Le||(Le=Object(ee.a)(["\n  query SuitesWithReservations {\n    guests {\n      id\n      name\n      surname\n    }\n    suites {\n      id\n      number\n      title\n    }\n    reservations {\n      fromDate\n      id\n      guest {\n        id\n        name\n        surname\n      }\n      meal\n      notes\n      purpose\n      roommates {\n        id\n        name\n        surname\n      }\n      suite {\n        id\n      }\n      toDate\n      type\n    }\n  }\n"]))),pt=Object(F.g)((function(e){var t=e.setPageTitle,n=Object(G.a)().t,a=Object(N.useState)([]),r=Object(k.a)(a,2),i=r[0],s=r[1],o=Object(N.useState)([]),c=Object(k.a)(o,2),d=c[0],u=c[1],j=Object(N.useState)(),b=Object(k.a)(j,2),m=b[0],v=b[1],h=Object(N.useState)(!1),p=Object(k.a)(h,2),f=p[0],g=p[1],x=Object(N.useState)(!0),y=Object(k.a)(x,2),I=y[0],S=y[1],C=Object(Ot.a)(ht,{onCompleted:function(){S(!1)},onError:function(e){return xe.b.error(e.message)}}).data,F=function(e){return{color:P.getReservationColor(e.type),end_time:O()(e.toDate),group:e.suite.id,guest:e.guest,id:e.id,itemProps:{className:"reservation-item",style:{background:P.getReservationColor(e.type),border:"none"}},meal:e.meal,notes:e.notes,purpose:e.purpose,roommates:e.roommates,start_time:O()(e.fromDate),suite:e.suite,title:"".concat(e.guest.name," ").concat(e.guest.surname),type:e.type}};Object(N.useEffect)((function(){var e,t,n=[],a=[];null===C||void 0===C||null===(e=C.suites)||void 0===e||e.forEach((function(e){null!==e&&a.push(e)})),null===C||void 0===C||null===(t=C.reservations)||void 0===t||t.forEach((function(e){null!==e&&n.push(F(e))})),u(n),s(a)}),[C]),Object(N.useEffect)((function(){t(n("home-title"))}),[t,n]);return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(tt.a,{active:!0,loading:I,paragraph:{rows:5},children:Object(ie.jsxs)(Oe.a,{canChangeGroup:!1,canMove:!1,canResize:!1,defaultTimeEnd:O()().add(12,"day"),defaultTimeStart:O()().add(-12,"day"),groupRenderer:function(e){var t=e.group;return Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)(be.a,{level:5,children:t.title})})},groups:i,itemRenderer:function(e){return Object(ie.jsx)(fe,Object(l.a)({},e))},items:d,lineHeight:60,onCanvasClick:function(e,t){var n=i.find((function(t){return t.id===e}));void 0!==n&&(v({fromDate:O()(t),suite:Object(l.a)({},n),roommates:[],toDate:O()(t).add(1,"day"),type:"NONBINDING"}),g(!0))},onItemClick:function(e){var t=d.find((function(t){return t.id===e}));void 0!==t&&(v({fromDate:O()(t.start_time),guest:t.guest,id:t.id,meal:t.meal,notes:t.notes,purpose:t.purpose,roommates:t.roommates,suite:t.suite,toDate:O()(t.end_time),type:t.type}),g(!0))},children:[Object(ie.jsxs)(me.TimelineHeaders,{children:[Object(ie.jsx)(me.SidebarHeader,{children:function(e){var t=e.getRootProps;return Object(ie.jsx)("div",Object(l.a)(Object(l.a)({},t()),{},{className:"side-header"}))}}),Object(ie.jsx)(me.DateHeader,{unit:"primaryHeader"}),Object(ie.jsx)(me.DateHeader,{className:"days",unit:"day"})]}),Object(ie.jsx)(me.CursorMarker,{children:function(e){var t=e.styles,n=e.date;return Object(ie.jsx)("div",{style:Object(l.a)(Object(l.a)({},t),{},{backgroundColor:"rgba(136, 136, 136, 0.5)",color:"#888"}),children:Object(ie.jsx)("div",{className:"rt-marker__label",children:Object(ie.jsx)("div",{className:"rt-marker__content",children:O()(n).format("DD MMM HH:mm")})})})}})]})}),Object(ie.jsx)(mt,{addOrUpdateReservation:function(e){if(void 0!==e&&null!==e){var t=d.filter((function(t){return t.id!==e.id}));u(t.concat(F(e)))}},close:function(){v(void 0),g(!1)},isOpen:f,clearReservation:function(e){void 0!==e&&null!==e&&u(d.filter((function(t){return t.id!==e}))),v(void 0)},reservation:m})]})})),ft=n(529),gt=(n(504),function(e){var t=e.guest,n=e.openGuestDrawer,a=e.selectGuest;return Object(ie.jsx)(ft.b.Item,{actions:[Object(ie.jsx)(de.a,{onClick:function(){a(t),n()},type:"link",children:"upravit"},"edit")],children:Object(ie.jsx)(ft.b.Item.Meta,{avatar:Object(ie.jsx)(q.a,{gap:4,size:"large",style:{backgroundColor:P.getRandomColor()},children:t.name.substring(0,1).toUpperCase()}),description:t.email,title:"".concat(t.name," ").concat(t.surname)})})}),xt=Object(F.g)((function(e){var t=e.setPageTitle,n=Object(G.a)().t,a=Object(N.useState)(!0),r=Object(k.a)(a,2),i=r[0],s=r[1],o=Object(N.useState)(!1),c=Object(k.a)(o,2),l=c[0],d=c[1],u=Object(N.useState)([]),j=Object(k.a)(u,2),b=j[0],m=j[1],O=Object(N.useState)(null),v=Object(k.a)(O,2),h=v[0],p=v[1],f=Object(Ot.a)(lt,{onCompleted:function(){s(!1)},onError:function(e){return xe.b.error(e.message)}}).data;return Object(N.useEffect)((function(){var e=[];void 0!==f&&null!==(null===f||void 0===f?void 0:f.guests)&&(f.guests.forEach((function(t){null!==t&&e.push(t)})),m(e))}),[f]),Object(N.useEffect)((function(){t(n("guests.page-title"))}),[t,n]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(tt.a,{active:!0,loading:i,paragraph:{rows:5},children:Object(ie.jsx)(ft.b,{bordered:!0,className:"guests-list",dataSource:b,footer:Object(ie.jsx)(de.a,{icon:Object(ie.jsx)(we.a,{}),onClick:function(){p(null),d(!0)},type:"primary",children:n("guests.add")}),header:Object(ie.jsx)("h4",{children:n("guests.list")}),itemLayout:"horizontal",renderItem:function(e){return Object(ie.jsx)(gt,{guest:e,openGuestDrawer:function(){return d(!0)},selectGuest:p})}})}),Object(ie.jsx)(ct,{addGuest:function(e){var t=b.filter((function(t){return t.id!==e.id}));m(t.concat(e))},close:function(){return d(!1)},guest:h,removeGuest:function(e){return m(b.filter((function(t){return t.id!==e})))},visible:l})]})})),yt=Object(te.a)(_e||(_e=Object(ee.a)(["\n  mutation CreateSuite($data: SuiteInput!) {\n    createSuite(data: $data) {\n      suite {\n        id\n        number\n        title\n      }\n    }\n  }\n"]))),It=Object(te.a)(Xe||(Xe=Object(ee.a)(["\n  mutation UpdateSuite($data: SuiteInput!) {\n    updateSuite(data: $data) {\n      suite {\n        id\n        number\n        title\n      }\n    }\n  }\n"]))),kt=Object(te.a)(Ze||(Ze=Object(ee.a)(["\n  mutation DeleteSuite($suiteId: ID!) {\n    deleteSuite(suiteId: $suiteId) {\n      suite {\n        id\n      }\n    }\n  }\n"]))),St=function(e){var t=e.addOrUpdateSuite,n=e.clearSuite,a=e.close,r=e.suite,i=e.visible,s=Object(G.a)().t,o=function(e){return xe.b.error(e.message)},c=Object(E.a)(yt,{onError:o}),d=Object(k.a)(c,2),u=d[0],j=d[1].loading,b=Object(E.a)(kt,{onError:o}),m=Object(k.a)(b,2),O=m[0],v=m[1].loading,h=Object(E.a)(It,{onError:o}),p=Object(k.a)(h,2),f=p[0],g=p[1].loading,x=ye.a.useForm(),y=Object(k.a)(x,1)[0],I=Object(N.useState)(!1),S=Object(k.a)(I,2),C=S[0],F=S[1],z={number:null===r||void 0===r?void 0:r.number,title:null===r||void 0===r?void 0:r.title};return Object(N.useEffect)((function(){!0===i&&y.resetFields()}),[y,i]),Object(ie.jsx)(et.a,{closeIcon:Object(ie.jsx)(Ie.a,{onCancel:function(){return F(!1)},onConfirm:function(){F(!1),a()},placement:"rightTop",title:"Zav\u0159\xedt formul\xe1\u0159? Data ve formul\xe1\u0159i budou ztracena",visible:C,children:Object(ie.jsx)(Re.a,{onClick:function(){y.isFieldsTouched()?F(!0):a()}})}),footer:Object(ie.jsxs)(ie.Fragment,{children:[void 0!==r&&Object(ie.jsx)(Ie.a,{cancelText:"Ne",icon:Object(ie.jsx)(at.a,{}),okText:"Ano",onConfirm:function(){O({variables:{suiteId:r.id}}).then((function(e){var t,r,i,s=null===(t=e.data)||void 0===t||null===(r=t.deleteSuite)||void 0===r||null===(i=r.suite)||void 0===i?void 0:i.id;void 0!==s&&(n(s),xe.b.success("Apartm\xe1 byla odstran\u011bna"),a())}))},title:"opravdu odstranit?",children:Object(ie.jsx)(de.a,{danger:!0,style:{float:"left"},type:"primary",children:"Odstranit"})}),Object(ie.jsx)(de.a,{onClick:function(){y.validateFields().then((function(){var e=y.getFieldsValue(!0),n={number:e.number,title:e.title};void 0===r?u({variables:{data:Object(l.a)({},n)}}).then((function(e){var n,r,i=null===(n=e.data)||void 0===n||null===(r=n.createSuite)||void 0===r?void 0:r.suite;void 0!==i&&null!==i&&(t(i),xe.b.success("Apartm\xe1 byla vytvo\u0159ena"),a())})):f({variables:{data:Object(l.a)({id:r.id},n)}}).then((function(e){var n,r,i=null===(n=e.data)||void 0===n||null===(r=n.updateSuite)||void 0===r?void 0:r.suite;void 0!==i&&null!==i&&(t(i),xe.b.success("Apartm\xe1 byla aktualizov\xe1na"),a())}))})).catch((function(){console.error("Form validation failed")}))},type:"primary",children:void 0===r?"Vytvo\u0159it":"Upravit"})]}),footerStyle:{textAlign:"right"},placement:"left",title:"Nov\xe9 apartm\xe1",visible:i,width:500,children:Object(ie.jsx)(A.a,{size:"large",spinning:j||v||g,tip:"Na\u010d\xedt\xe1m...",children:Object(ie.jsxs)(ye.a,{form:y,initialValues:z,layout:"vertical",name:"suite",children:[Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"N\xe1zev",name:"title",required:!0,rules:[Qe.requiredRule(s("forms.field-required"))],children:Object(ie.jsx)(Fe.a,{placeholder:"n\xe1zev apartm\xe1"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"\u010c\xedslo",name:"number",required:!0,rules:[Qe.requiredRule(s("forms.field-required")),{message:"zadejte \u010d\xedslo",pattern:/^[0-9]+$/}],children:Object(ie.jsx)(Fe.a,{placeholder:"\u010d\xedslo apartm\xe1",type:"number"})})]})})})},Ct=(n(505),function(e){var t=e.hasAccess,n=e.onAdd;return!0===t?Object(ie.jsx)(de.a,{icon:Object(ie.jsx)(we.a,{}),onClick:n,type:"primary",children:"P\u0159idat apartm\xe1"}):null}),Nt=Object(F.g)((function(e){var t=e.setPageTitle,n=Object(G.a)().t,a=Object(N.useState)(!0),r=Object(k.a)(a,2),i=r[0],s=r[1],o=Object(N.useState)(!1),c=Object(k.a)(o,2),l=c[0],d=c[1],u=Object(N.useState)(),j=Object(k.a)(u,2),b=j[0],m=j[1],O=Object(N.useState)([]),v=Object(k.a)(O,2),h=v[0],p=v[1],f=Object(N.useState)(!1),g=Object(k.a)(f,2),x=g[0],y=g[1],I=Object(Ot.a)(vt,{onCompleted:function(){y(!0),s(!1)},onError:function(e){xe.b.error(e.message),y(!1),s(!1)}}).data;return Object(N.useEffect)((function(){var e,t=[];null===I||void 0===I||null===(e=I.suites)||void 0===e||e.forEach((function(e){null!==e&&t.push(e)})),p(t)}),[I]),Object(N.useEffect)((function(){t(n("suites-title"))}),[t,n]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(tt.a,{active:!0,loading:i,paragraph:{rows:5},children:Object(ie.jsx)(ft.b,{bordered:!0,className:"suites-list",dataSource:h,footer:Object(ie.jsx)(Ct,{hasAccess:x,onAdd:function(){m(void 0),d(!0)}}),header:Object(ie.jsx)("h4",{children:"Seznam apartm\xe1"}),itemLayout:"horizontal",renderItem:function(e){return Object(ie.jsx)(ft.b.Item,{actions:[Object(ie.jsx)(de.a,{onClick:function(){m(e),d(!0)},type:"link",children:"upravit"},"edit")],children:Object(ie.jsx)(ft.b.Item.Meta,{avatar:Object(ie.jsx)(q.a,{gap:4,size:"large",children:Object(ie.jsx)(D.a,{})}),description:"\u010d\xedslo pokoje - ".concat(e.number),title:e.title})})}})}),Object(ie.jsx)(St,{addOrUpdateSuite:function(e){p(h.filter((function(t){return t.id!==e.id})).concat(e))},clearSuite:function(e){p(h.filter((function(t){return t.id!==e})))},close:function(){return d(!1)},suite:b,visible:l})]})})),Ft=(n(506),{labelCol:{lg:8,md:8,sm:8},wrapperCol:{lg:16,md:16,sm:16}}),zt={wrapperCol:{lg:{offset:8,span:16},xs:{offset:0,span:24}}},Tt=Object(F.g)((function(e){var t=e.history,n=e.setPageTitle,a=Object(G.a)().t,r=Object(E.a)(ne,{onCompleted:function(e){null!==e.tokenAuth&&(localStorage.setItem(W,e.tokenAuth.token),localStorage.setItem(J,e.tokenAuth.refreshToken),localStorage.setItem(Q,e.tokenAuth.payload.username),t.push(H()))},onError:function(e){switch(e.message){case B:xe.b.error(a("login.invalid-login"));break;default:xe.b.error(a("generic-error"))}}}),i=Object(k.a)(r,2),s=i[0],o=i[1].loading,c=ye.a.useForm(),d=Object(k.a)(c,1)[0];return Object(N.useEffect)((function(){n(a("pages.login"))}),[n,a]),Object(ie.jsx)(S.a.Content,{children:Object(ie.jsx)(A.a,{spinning:o,tip:"".concat(a("login.in-progress"),"..."),children:Object(ie.jsxs)(ye.a,Object(l.a)(Object(l.a)({},Ft),{},{className:"login",form:d,name:"login",onFinish:function(e){s({variables:{password:e.password.trim(),username:e.username.trim()}})},children:[Object(ie.jsx)(ye.a.Item,{label:a("name"),name:"username",rules:[{required:!0,message:a("forms.field-required")}],children:Object(ie.jsx)(Fe.a,{type:"text",placeholder:a("forms.user-name")})}),Object(ie.jsx)(ye.a.Item,{label:"Heslo",name:"password",rules:[{required:!0,message:a("forms.field-required")}],children:Object(ie.jsx)(Fe.a,{type:"password",placeholder:a("forms.password")})}),Object(ie.jsxs)(ye.a.Item,Object(l.a)(Object(l.a)({},zt),{},{children:[Object(ie.jsx)(de.a,{type:"default",htmlType:"button",onClick:function(){return d.resetFields()},children:a("forms.reset")}),Object(ie.jsx)(de.a,{type:"primary",htmlType:"submit",children:a("forms.login")})]}))]}))})})})),wt=Object(te.a)(Ke||(Ke=Object(ee.a)(["\n  query ReservationGuests($reservationHash: String!) {\n    reservationGuests(reservationHash: $reservationHash) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n      roommates {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"]))),Dt=Object(te.a)(Ye||(Ye=Object(ee.a)(["\n  mutation CreateContactMessage($data: ContactInput!) {\n    createContactMessage(data: $data) {\n      contact {\n        message\n      }\n    }\n  }\n"]))),Rt=function(e){var t=e.show,n=Object(E.a)(Dt),a=Object(k.a)(n,2),r=a[0],i=a[1].loading,s=ye.a.useForm(),o=Object(k.a)(s,1)[0];return!0===t?Object(ie.jsx)(A.a,{spinning:i,tip:"Pos\xedl\xe1m zpr\xe1vu",children:Object(ie.jsx)(le.a,{status:"error",title:"Rezervace nenalezena",subTitle:"Zanechte n\xe1m pros\xedm zpr\xe1vu, nebo n\xe1m zavolejte na +420 XXX XXX XXX",extra:Object(ie.jsxs)(ye.a,{form:o,name:"contact",onFinish:function(){o.validateFields().then((function(){r({variables:{data:{message:o.getFieldValue("message")}}}).then((function(){xe.b.success("Va\u0161e zpr\xe1va byla odesl\xe1na, d\u011bkujeme!"),o.resetFields()}))})).catch((function(){return xe.b.error("Formul\xe1\u0159 nelze odeslat, opravte pros\xedm chyby")}))},wrapperCol:{offset:6,span:12},children:[Object(ie.jsx)(ye.a.Item,{name:"message",rules:[{required:!0,message:"Zadejte text zpr\xe1vy"}],children:Object(ie.jsx)(Fe.a.TextArea,{rows:4})}),Object(ie.jsx)(ye.a.Item,{children:Object(ie.jsx)(de.a,{type:"primary",htmlType:"submit",children:"Odeslat"})})]})})}):null},Et=function(e){var t=e.guest,n=e.loading,a=e.openDrawer;return void 0===t?null:Object(ie.jsx)(ft.b,{bordered:!0,className:"guests-list",dataSource:t,header:Object(ie.jsx)("h4",{children:"Host"}),itemLayout:"horizontal",renderItem:function(e){return Object(ie.jsx)(ft.b.Item,{actions:n?[]:[Object(ie.jsx)(de.a,{onClick:function(){a(e)},type:"link",children:"upravit"},"edit")],children:Object(ie.jsx)(ft.b.Item.Meta,{avatar:Object(ie.jsx)(q.a,{gap:4,size:"large",style:{backgroundColor:P.getRandomColor()},children:e.name.substring(0,1).toUpperCase()}),description:e.email,title:"".concat(e.name," ").concat(e.surname)})},e.id)}})},qt=Object(te.a)(Je||(Je=Object(ee.a)(["\n  mutation UpdateReservationGuest($data: ReservationGuestInput!) {\n    updateReservationGuest(data: $data) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"]))),At=function(e){var t=e.close,n=e.guest,a=e.reservationHash,r=e.visible,i=Object(G.a)().t,s=Object(E.a)(qt),o=Object(k.a)(s,2),c=o[0],d=o[1].loading,u=Object(N.useState)(!1),j=Object(k.a)(u,2),b=j[0],m=j[1],O=ye.a.useForm(),v=Object(k.a)(O,1)[0],h={age:null===n||void 0===n?void 0:n.age,address:{municipality:null===n||void 0===n?void 0:n.addressMunicipality,psc:null===n||void 0===n?void 0:n.addressPsc,street:null===n||void 0===n?void 0:n.addressStreet},citizenship:{selected:null===n||void 0===n?void 0:n.citizenship},email:null===n||void 0===n?void 0:n.email,gender:null===n||void 0===n?void 0:n.gender,identity:null===n||void 0===n?void 0:n.identity,name:null===n||void 0===n?void 0:n.name,phone:null===n||void 0===n?void 0:n.phoneNumber,surname:null===n||void 0===n?void 0:n.surname,visa:null===n||void 0===n?void 0:n.visaNumber},p=Object(ie.jsx)(ye.a.Item,{name:"email-prefix",noStyle:!0,children:Object(ie.jsx)(nt.a,{})});return Object(N.useEffect)((function(){!0===r&&v.resetFields()}),[v,r]),void 0===n?null:Object(ie.jsx)(et.a,{closeIcon:Object(ie.jsx)(Ie.a,{onCancel:function(){return m(!1)},onConfirm:function(){m(!1),v.resetFields(),t()},placement:"rightTop",title:"Zav\u0159\xedt formul\xe1\u0159? Data ve formul\xe1\u0159i budou ztracena",visible:b,children:Object(ie.jsx)(Re.a,{onClick:function(){v.isFieldsTouched()?m(!0):t()}})}),placement:"left",title:"Nov\xfd host",width:500,visible:r,footer:Object(ie.jsx)(de.a,{onClick:function(){v.validateFields().then((function(){var e,r,i,s,o,d=v.getFieldsValue(!0),u={age:d.age,addressMunicipality:null===(e=d.address)||void 0===e?void 0:e.municipality,addressPsc:null===(r=d.address)||void 0===r?void 0:r.psc,addressStreet:null===(i=d.address)||void 0===i?void 0:i.street,citizenship:void 0===(null===(s=d.citizenship)||void 0===s?void 0:s.selected)?null===(o=d.citizenship)||void 0===o?void 0:o.new:d.citizenship.selected,email:d.email,gender:d.gender,identity:d.identity,name:d.name,phoneNumber:d.phone,surname:d.surname,visaNumber:d.visa};c({variables:{data:Object(l.a)({id:String(null===n||void 0===n?void 0:n.id),hash:a},u)}}).then((function(e){var n,a,r=null===(n=e.data)||void 0===n||null===(a=n.updateReservationGuest)||void 0===a?void 0:a.guest;void 0!==r&&null!==r&&xe.b.success("Host ".concat(r.name," ").concat(r.surname," aktualizov\xe1n!")),t()})).catch((function(e){return xe.b.error(e.message)}))})).catch((function(){return xe.b.error("Formul\xe1\u0159 nelze odeslat, opravte pros\xedm chyby")}))},type:"primary",children:"Ulo\u017eit"}),footerStyle:{padding:"16px 20px",textAlign:"right"},children:Object(ie.jsx)(tt.a,{active:!0,loading:d,paragraph:{rows:15},children:Object(ie.jsxs)(ye.a,{form:v,initialValues:h,layout:"vertical",name:"guest",children:[Object(ie.jsx)(be.a,{level:5,children:"Osobn\xed \xfadaje"}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"Jm\xe9no",name:"name",required:!0,rules:[Qe.requiredRule(i("forms.field-required")),rt.requiredAlphaRule(i("forms.enter-text"))],children:Object(ie.jsx)(Fe.a,{placeholder:"Va\u0161e Jm\xe9no"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"P\u0159\xedjmen\xed",name:"surname",required:!0,rules:[Qe.requiredRule(i("forms.field-required")),rt.requiredAlphaRule(i("forms.enter-text"))],children:Object(ie.jsx)(Fe.a,{placeholder:"Va\u0161e P\u0159\xedjmen\xed"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"E-Mail",name:"email",required:!0,rules:[Qe.requiredRule(i("forms.field-required"))],children:Object(ie.jsx)(Fe.a,{addonBefore:p,placeholder:"e-mail",type:"email"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"\u010c\xedslo OP",name:"identity",children:Object(ie.jsx)(Fe.a,{placeholder:"\u010d\xedslo ob\u010dansk\xe9ho pr\u016fkazu"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"Telefonn\xed \u010c\xedslo",name:"phone",children:Object(ie.jsx)(Fe.a,{placeholder:"\u010d\xedslo"})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"V\u011bk",name:"age",children:Object(ie.jsx)(Ce.a,{options:rt.ageOptions,placeholder:"vyberte ze seznamu"})}),Object(ie.jsx)(ye.a.Item,{label:"Pohlav\xed",name:"gender",children:Object(ie.jsxs)(Ce.a,{placeholder:"vyberte ze seznamu",children:[Object(ie.jsx)(Ce.a.Option,{value:"M",children:"Mu\u017e"}),Object(ie.jsx)(Ce.a.Option,{value:"F",children:"\u017dena"})]})}),Object(ie.jsx)(ye.a.Item,{hasFeedback:!0,label:"\u010c\xedslo viza",name:"visa",children:Object(ie.jsx)(Fe.a,{placeholder:"\u010d\xedslo visa"})}),Object(ie.jsx)(be.a,{level:5,children:"Trval\xe9 bydli\u0161t\u011b"}),Object(ie.jsx)(ye.a.Item,{label:"Ulice",name:["address","street"],children:Object(ie.jsx)(Fe.a,{placeholder:"ulice"})}),Object(ie.jsx)(ye.a.Item,{label:"PS\u010c/Obec",children:Object(ie.jsxs)(Fe.a.Group,{compact:!0,children:[Object(ie.jsx)(ye.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","psc"],children:Object(ie.jsx)(Fe.a,{placeholder:"PS\u010c"})}),Object(ie.jsx)(ye.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","municipality"],children:Object(ie.jsx)(Fe.a,{placeholder:"Obec"})})]})}),Object(ie.jsx)(ye.a.Item,{label:"Ob\u010danstv\xed",children:Object(ie.jsxs)(Fe.a.Group,{compact:!0,children:[Object(ie.jsx)(ye.a.Item,{style:{width:"50%"},name:["citizenship","selected"],children:Object(ie.jsxs)(Ce.a,{style:{width:"100%"},placeholder:"ze seznamu",children:[Object(ie.jsx)(Ce.a.Option,{value:"cze",children:"CZE"}),Object(ie.jsx)(Ce.a.Option,{value:"sk",children:"SK"})]})}),Object(ie.jsx)(ye.a.Item,{style:{width:"50%"},name:["citizenship","new"],children:Object(ie.jsx)(Fe.a,{placeholder:"ru\u010dn\u011b"})})]})})]})})})},Mt=function(e){var t=e.loading,n=e.openDrawer,a=e.roommates;return void 0===a?null:Object(ie.jsx)(ft.b,{bordered:!0,className:"guests-list",dataSource:a,header:Object(ie.jsx)("h4",{children:"Spolubydl\xedc\xed"}),itemLayout:"horizontal",renderItem:function(e){return Object(ie.jsx)(ft.b.Item,{actions:t?[]:[Object(ie.jsx)(de.a,{onClick:function(){n(e)},type:"link",children:"upravit"},"edit")],children:Object(ie.jsx)(ft.b.Item.Meta,{avatar:Object(ie.jsx)(q.a,{gap:4,size:"large",style:{backgroundColor:P.getRandomColor()},children:e.name.substring(0,1).toUpperCase()}),description:e.email,title:"".concat(e.name," ").concat(e.surname)})},e.id)}})},Gt=function(e){var t=e.setPageTitle,n=Object(F.f)().hash,a=Object(G.a)().t,r=Object(N.useState)(),i=Object(k.a)(r,2),s=i[0],o=i[1],c=Object(N.useState)(),l=Object(k.a)(c,2),d=l[0],u=l[1],j=Object(N.useState)(),b=Object(k.a)(j,2),m=b[0],O=b[1],v=Object(N.useState)(!1),h=Object(k.a)(v,2),p=h[0],f=h[1],g=Object(N.useState)(!1),x=Object(k.a)(g,2),y=x[0],I=x[1],S=Object(Ot.a)(wt,{variables:{reservationHash:n},onCompleted:function(){t(a("guest-view-title")),I(!1)},onError:function(){t(null),I(!0)}}),C=S.loading,z=S.data;return Object(N.useEffect)((function(){var e,t,n=[],a=null===z||void 0===z||null===(e=z.reservationGuests)||void 0===e?void 0:e.guest,r=null===z||void 0===z||null===(t=z.reservationGuests)||void 0===t?void 0:t.roommates;void 0!==a&&null!==a&&o([a]),void 0!==r&&null!==r&&(r.forEach((function(e){null!==e&&n.push(e)})),u(n))}),[z]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)(A.a,{spinning:C,children:[Object(ie.jsx)(Et,{guest:s,loading:C,openDrawer:function(e){O(e),f(!0)}}),Object(ie.jsx)(Mt,{loading:C,openDrawer:function(e){O(e),f(!0)},roommates:d}),Object(ie.jsx)(Rt,{show:y})]}),Object(ie.jsx)(At,{close:function(){return f(!1)},guest:m,reservationHash:n,visible:p})]})},Pt=function(e){var t=e.title;return null===t?null:Object(ie.jsx)(be.a,{level:3,style:{borderBottom:"1px solid #e1e1e1",paddingBottom:".3em"},children:t})},Ht=function(){var e=Object(G.a)().t,t=Object(N.useState)("".concat(e("loading"),"...")),n=Object(k.a)(t,2),a=n[0],r=n[1];return Object(ie.jsxs)(S.a,{id:"app",children:[Object(ie.jsx)(C.a,{offsetTop:0,className:"app__affix-header",children:Object(ie.jsx)(ce,{user:function(){var e=localStorage.getItem(Q);return null!==e?{username:e}:null}()})}),Object(ie.jsx)(S.a.Header,{children:Object(ie.jsx)(Pt,{title:a})}),Object(ie.jsx)(S.a.Content,{className:"app-content",children:Object(ie.jsxs)(F.c,{children:[Object(ie.jsx)(F.a,{exact:!0,path:K,children:Object(ie.jsx)(pt,{setPageTitle:r})}),Object(ie.jsx)(F.a,{exact:!0,path:Y,children:Object(ie.jsx)(Nt,{setPageTitle:r})}),Object(ie.jsx)(F.a,{exact:!0,path:_,children:Object(ie.jsx)(xt,{setPageTitle:r})}),Object(ie.jsx)(F.a,{exact:!0,path:X,children:Object(ie.jsx)(Tt,{setPageTitle:r})}),Object(ie.jsx)(F.a,{exact:!0,path:Z,children:Object(ie.jsx)(Gt,{setPageTitle:r})}),Object(ie.jsx)(F.a,{path:"*",children:Object(ie.jsx)(ue,{})})]})})]})},$t=n(17),Bt=n(283),Ut=n.n(Bt),Vt=n(226),Lt=n(280),_t=n(155);Vt.a.use(Lt.a).use(_t.e).init({fallbackLng:"cs",debug:!1,lng:"cs"});Vt.a,n(507);var Xt,Zt=function(){return Object(ie.jsx)(S.a,{className:"splash-layout",children:Object(ie.jsxs)(S.a.Content,{children:[Object(ie.jsx)(tt.a,{active:!0,avatar:!0,paragraph:{rows:3},className:"splash-skeleton"}),Object(ie.jsx)(tt.a,{active:!0,avatar:!0,paragraph:{rows:3},className:"splash-skeleton"}),Object(ie.jsx)(tt.a,{active:!0,avatar:!0,paragraph:{rows:3},className:"splash-skeleton"})]})})};O.a.locale("cs");var Kt=new v.a({uri:"/api"}),Yt=new h.a((function(e,t){var n=localStorage.getItem(W),a=b("csrftoken");return e.setContext((function(e){var t=e.headers,r=void 0===t?{}:t;return{headers:Object(l.a)(Object(l.a)({},r),{},{Authorization:null===n?"":"JWT ".concat(n),"X-CSRFToken":null===a?"":a})}})),t(e)})),Jt=Object(I.a)((function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation,r=e.forward;if(t){var i,s=Object(c.a)(t);try{for(s.s();!(i=s.n()).done;){switch(i.value.message){case V:return Object(p.a)(Xt.mutate({mutation:ae,variables:{refreshToken:localStorage.getItem(J)}}).then((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.refreshToken})).catch((function(e){return console.error(e)}))).flatMap((function(e){var t=e;return localStorage.setItem(W,t.token),localStorage.setItem(J,t.refreshToken),localStorage.setItem(Q,t.payload.username),localStorage.setItem("tokenExpiresIn",t.payload.exp.toString()),localStorage.setItem("refreshTokenExpiresIn",t.refreshExpiresIn.toString()),r(a)}));case U:case L:localStorage.removeItem(W),localStorage.removeItem(J),localStorage.removeItem(Q),window.location.replace(X)}}}catch(o){s.e(o)}finally{s.f()}}n&&console.error(n)}));Xt=new f.a({cache:new g.a({typePolicies:{Query:{fields:{guests:{merge:!1},reservations:{merge:!1},suiteReservations:{merge:!1},suites:{merge:!1}}},Reservation:{fields:{roommates:{merge:!1}}}}}),link:Object(x.a)([Jt,Yt,Kt])}),u.a.render(Object(ie.jsx)(N.Suspense,{fallback:Object(ie.jsx)(Zt,{}),children:Object(ie.jsx)(y.a,{client:Xt,children:Object(ie.jsx)($t.a,{locale:Ut.a,children:Object(ie.jsx)(j.a,{children:Object(ie.jsx)(Ht,{})})})})}),document.getElementById("root"))}},[[511,1,2]]]);
//# sourceMappingURL=main.4946d17d.chunk.js.map