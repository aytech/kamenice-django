(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{294:function(e,t,n){},296:function(e,t,n){},343:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},499:function(e,t,n){},500:function(e,t,n){},501:function(e,t,n){},507:function(e,t,n){"use strict";n.r(t);var a,i,r,s,o,c=n(261),l=n(27),d=n(42),u=n.n(d),j=n(56),b=(n(294),function(e){if(document.cookie&&""!==document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var a=t[n].trim();if(a.substring(0,e.length+1)===e+"=")return decodeURIComponent(a.substring(e.length+1))}return null}),m=n(36),v=n.n(m),O=(n(295),n(529)),h=n(38),p=n(502),f=n(203),x=n(508),g=n(503),y=n(273),I=n(18),k=n(519),S=n(533),z=n(0),C=n(41),N=(n(296),n.p+"static/media/mill.1f872c17.svg"),F=n(542),R=n(540),T=n(539),D=n(538),w=n(546),P=n(278),A=n(266),M=n(211),E={colors:["#f5222d","#fa541c","#fa8c16","#faad14","#fadb14","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96"],getRandomColor:function(){return E.colors[Math.floor(Math.random()*E.colors.length)]},getReservationColor:function(e){switch(e){case"NONBINDING":return"rgb(254, 223, 3)";case"ACCOMMODATED":return"rgb(0, 133, 182)";case"INHABITED":return"rgb(254, 127, 45)";case"BINDING":default:return"rgb(0, 212, 157)"}}},G=function(){var e=window.location.search.substring(1).split("=");return e.length>=2&&void 0!==e[1]?e[1]:"/"},q="YYYY-MM-DD HH:mm",H="Please enter valid credentials",$="Refresh token is expired",U="Signature has expired",B="Unauthorized",V="Host\xe9",L="Rezervace / Obsazenost",_="Spr\xe1va host\u016f",J="Apartm\xe1",X="/guests",Z="/login",K="/rezervace/:hash/hoste",Y="/",W="/apartma",Q="refreshToken",ee="token",te="username",ne=n(33),ae=n(115),ie=Object(ae.a)(a||(a=Object(ne.a)(["\n  mutation TokenAuth($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      payload\n      refreshExpiresIn\n      refreshToken\n      token\n    }\n  }\n"]))),re=Object(ae.a)(i||(i=Object(ne.a)(["\n  mutation RefreshToken($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      payload\n      refreshExpiresIn\n      refreshToken\n      token\n    }\n  }\n"]))),se=Object(ae.a)(r||(r=Object(ne.a)(["\n  mutation RevokeToken($refreshToken: String!) {\n    revokeToken(refreshToken: $refreshToken) {\n      revoked\n    }\n  }\n"]))),oe=n(3),ce=Object(C.g)((function(e){var t=e.history,n=localStorage.getItem(te),a=Object(w.a)(se),i=Object(I.a)(a,2),r=i[0],s=i[1].loading,o=Object(z.useCallback)((function(){localStorage.removeItem(te),t.push("/login?next=".concat(G()))}),[t]),c=null!==n?Object(oe.jsx)(P.a,{size:32,style:{backgroundColor:E.getRandomColor()},children:n.substring(0,1).toUpperCase()}):null;return null!==n?Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(A.a,{spinning:s,children:Object(oe.jsxs)(M.a,{mode:"horizontal",children:[Object(oe.jsx)(M.a.Item,{icon:Object(oe.jsx)(F.a,{}),children:Object(oe.jsx)(j.b,{to:"/",children:"Rezervace"})},"reservation"),Object(oe.jsx)(M.a.Item,{icon:Object(oe.jsx)(R.a,{}),children:Object(oe.jsx)(j.b,{to:"/guests",children:"Host\xe9"})},"guests"),Object(oe.jsx)(M.a.Item,{icon:Object(oe.jsx)(T.a,{}),children:Object(oe.jsx)(j.b,{to:"/apartma",children:"Apartm\xe1"})},"suites")]})}),Object(oe.jsx)(M.a,{className:"user",mode:"horizontal",children:Object(oe.jsx)(M.a.SubMenu,{title:c,children:Object(oe.jsx)(M.a.Item,{icon:Object(oe.jsx)(D.a,{}),onClick:function(){var e=localStorage.getItem(Q);null!==e?r({variables:{refreshToken:e}}).then((function(){localStorage.removeItem(ee),localStorage.removeItem(Q)})).finally((function(){return o()})):o()},children:"Odhl\xe1sit"},"logout")},"user-sub")})]}):null})),le=n(527),de=function(){return Object(oe.jsxs)(le.a,{children:[Object(oe.jsx)(j.b,{to:"/",children:Object(oe.jsx)("img",{className:"logo",src:N,alt:"Kamenice logo"})}),Object(oe.jsx)(ce,{})]})},ue=n(531),je=n(52),be=Object(C.g)((function(e){var t=e.history;return Object(oe.jsx)(k.a,{children:Object(oe.jsx)(k.a.Content,{children:Object(oe.jsx)(ue.a,{status:"404",title:"Jejda!",subTitle:"hled\xe1me va\u0161\xed str\xe1nku... ale nem\u016f\u017eeme ji naj\xedt...",extra:Object(oe.jsx)(je.a,{onClick:function(){return t.push("/")},type:"primary",children:"P\u0159ej\xedt na \xfavod"})})})})})),me=n(77),ve=n.n(me),Oe=n(107),he=n.n(Oe),pe=(n(342),n(343),n(265)),fe=n(268),xe=n.n(fe),ge=function(e){var t=e.item,n=e.itemContext,a=e.getItemProps,i=(0,e.getResizeProps)(),r=i.left,s=i.right;return void 0!==t.itemProps?Object(oe.jsxs)("div",Object(l.a)(Object(l.a)({},a(t.itemProps)),{},{children:[n.useResizeHandle?Object(oe.jsx)("div",Object(l.a)({},r)):"",Object(oe.jsx)(pe.a,{title:t.title,content:Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("div",{style:{color:t.color,fontWeight:700},children:t.type}),Object(oe.jsxs)("div",{children:["Od: ",Object(oe.jsx)("strong",{children:t.start_time.format("DD MMM HH:mm")})]}),Object(oe.jsxs)("div",{children:["Do: ",Object(oe.jsx)("strong",{children:t.end_time.format("DD MMM HH:mm")})]})]}),children:Object(oe.jsx)("div",{className:"rct-item-content",style:{maxHeight:"".concat(n.dimensions.height)},children:Object(oe.jsx)(xe.a,{strong:!0,children:t.title})})}),n.useResizeHandle?Object(oe.jsx)("div",Object(l.a)({},s)):""]})):null},ye=n(280),Ie=n(524),ke=n(277),Se=n(520),ze=n(525),Ce=n(530),Ne=n(523),Fe=n(140),Re=n(536),Te=n(528),De=n(521),we=n(183),Pe=n(541),Ae=n(537),Me=n(76),Ee=n(545),Ge=n(534),qe=(n(432),function(e){switch(e){case"NONBINDING":return"Nez\xe1vazn\xe1 Rezervace";case"ACCOMMODATED":return"Aktu\xe1ln\u011b Ubytov\xe1n\xed";case"INHABITED":return"Obydlen\xfd Term\xedn";case"BINDING":default:return"Z\xe1vazn\xe1 Rezervace"}});!function(e){e.ADULT="ADULT",e.CHILD="CHILD",e.INFANT="INFANT",e.YOUNG="YOUNG"}(s||(s={})),function(e){e.F="F",e.M="M"}(o||(o={}));var He,$e,Ue,Be,Ve,Le,_e,Je,Xe,Ze,Ke,Ye,We,Qe,et,tt,nt={mealOptions:[{label:"Bez Stravy",value:"NOMEAL"},{label:"Jen Sn\xeddan\u011b",value:"BREAKFAST"},{label:"Polopenze",value:"HALFBOARD"}],reservationOptions:[{label:qe("BINDING"),value:"BINDING"},{label:qe("NONBINDING"),value:"NONBINDING"},{label:qe("ACCOMMODATED"),value:"ACCOMMODATED"},{label:qe("INHABITED"),value:"INHABITED"}],getRequiredRule:function(e){return{required:!0,message:e}},guestValidators:function(e){return[{message:"host nem\u016f\u017ee b\xfdt stejn\xfd jako spolubydl\xedc\xed",validator:function(t,n){var a=e.getFieldValue("roommates");if(void 0===a||0===a.length)return Promise.resolve();var i=a.filter((function(e){return void 0!==e&&e.id===n}));return void 0===i||0===i.length?Promise.resolve():Promise.reject(new Error("Fail guest validation, equals to roommate"))}},{message:"vyberte hosta",required:!0}]},roommateValidators:function(e){return[{message:"spolubydl\xedc\xed je ji\u017e vybr\xe1n",validator:function(t,n){var a=e.getFieldValue("roommates").filter((function(e){return void 0!==e&&e.id===n}));return void 0===a||a.length<=1?Promise.resolve():Promise.reject(new Error("Fail roommate validation, duplicate value"))}},{message:"spolubydl\xedc\xed nem\u016f\u017ee b\xfdt stejn\xfd jako host",validator:function(t,n){return e.getFieldValue("guest")!==n?Promise.resolve():Promise.reject(new Error("Fail roommate validation, equals to guest"))}}]}},at={requiredRule:{required:!0,message:"pole je povinn\xe9"},trim:function(e){return void 0===e?e:e.trim()}},it=n(532),rt=n(543),st=n(544),ot={ageOptions:[{label:"12+",value:"YOUNG"},{label:"3-12 let",value:"CHILD"},{label:"Do 3 let",value:"INFANT"},{label:"Dosp\u011bl\xfd",value:"ADULT"}],getGuestResponseErrorList:function(e){try{return Array.from(Object.values(JSON.parse(e.replaceAll("'",'"'))),(function(e){return e[0]}))}catch(y){return["Chyba serveru, kontaktujte spr\xe1vce"]}},phoneCodeRequiredRules:[at.requiredRule,{message:"zadejte k\xf3d ve form\xe1tu 420, +420 nebo (420)",pattern:/^\+?\(?[0-9]*\)?$/,transform:at.trim}],requiredAlphaRules:[at.requiredRule,{message:"zadejte pouze text",pattern:/^([A-Za-z\s\xe1\xc1\u010d\u010c\u010f\u010e\xe9\xc9\u011b\u011a\xed\xcd\u0148\u0147\u0159\u0158\u0161\u0160\u0165\u0164\xfa\xda\u016f\u016e\xfd\xdd\u017e\u017d\xf3\xd3])+$/,transform:at.trim}],requiredNumericRules:[at.requiredRule,{message:"zadejte pouze \u010d\xedsla",pattern:/^[\d\s]+$/,transform:at.trim}]},ct=(n(433),Object(ae.a)(He||(He=Object(ne.a)(["\n  mutation CreateGuest($data: GuestInput!) {\n    createGuest(data: $data) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"])))),lt=Object(ae.a)($e||($e=Object(ne.a)(["\n  mutation UpdateGuest($data: GuestInput!) {\n    updateGuest(data: $data) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"]))),dt=Object(ae.a)(Ue||(Ue=Object(ne.a)(["\n  mutation DeleteGuest($guestId: ID!) {\n    deleteGuest(guestId: $guestId) {\n      guest {\n        id\n      }\n    }\n  }\n"]))),ut=function(e){var t=e.addGuest,n=e.close,a=e.guest,i=e.removeGuest,r=e.visible,s=Ie.a.useForm(),o=Object(I.a)(s,1)[0],c=Object(w.a)(ct),d=Object(I.a)(c,2),u=d[0],j=d[1].loading,b=Object(w.a)(lt),m=Object(I.a)(b,2),v=m[0],O=m[1].loading,h=Object(w.a)(dt),p=Object(I.a)(h,2),f=p[0],x=p[1].loading,g=Object(z.useState)(!1),y=Object(I.a)(g,2),k=y[0],S=y[1],C={age:null===a||void 0===a?void 0:a.age,address:{municipality:null===a||void 0===a?void 0:a.addressMunicipality,psc:null===a||void 0===a?void 0:a.addressPsc,street:null===a||void 0===a?void 0:a.addressStreet},citizenship:{selected:null===a||void 0===a?void 0:a.citizenship},email:null===a||void 0===a?void 0:a.email,gender:null===a||void 0===a?void 0:a.gender,identity:null===a||void 0===a?void 0:a.identity,name:null===a||void 0===a?void 0:a.name,phone:null===a||void 0===a?void 0:a.phoneNumber,surname:null===a||void 0===a?void 0:a.surname,visa:null===a||void 0===a?void 0:a.visaNumber},N=Object(oe.jsx)(Ie.a.Item,{name:"email-prefix",noStyle:!0,children:Object(oe.jsx)(rt.a,{})});return Object(z.useEffect)((function(){!0===r&&o.resetFields()}),[o,r]),Object(oe.jsx)(it.a,{closeIcon:Object(oe.jsx)(Se.a,{onCancel:function(){return S(!1)},onConfirm:function(){S(!1),o.resetFields(),n()},placement:"rightTop",title:"Zav\u0159\xedt formul\xe1\u0159? Data ve formul\xe1\u0159i budou ztracena",visible:k,children:Object(oe.jsx)(Me.a,{onClick:function(){o.isFieldsTouched()?S(!0):n()}})}),placement:"left",title:"Nov\xfd host",width:500,visible:r,footer:Object(oe.jsxs)(oe.Fragment,{children:[void 0!==a&&null!==a&&Object(oe.jsx)(Se.a,{cancelText:"Ne",icon:Object(oe.jsx)(st.a,{}),okText:"Ano",onConfirm:function(){f({variables:{guestId:a.id}}).then((function(e){var t,a,r=null===(t=e.data)||void 0===t||null===(a=t.deleteGuest)||void 0===a?void 0:a.guest;void 0!==i&&void 0!==r&&null!==r&&(i(r.id),ke.b.success("Host byl smaz\xe1n"),n())}))},title:"opravdu odstranit?",children:Object(oe.jsx)(je.a,{danger:!0,style:{float:"left"},type:"primary",children:"Odstranit"})}),Object(oe.jsx)(je.a,{onClick:function(){o.validateFields().then((function(){var e,i,r,s,c,d=o.getFieldsValue(!0),j={age:d.age,addressMunicipality:null===(e=d.address)||void 0===e?void 0:e.municipality,addressPsc:null===(i=d.address)||void 0===i?void 0:i.psc,addressStreet:null===(r=d.address)||void 0===r?void 0:r.street,citizenship:void 0===(null===(s=d.citizenship)||void 0===s?void 0:s.selected)?null===(c=d.citizenship)||void 0===c?void 0:c.new:d.citizenship.selected,email:d.email,gender:d.gender,identity:d.identity,name:d.name,phoneNumber:d.phone,surname:d.surname,visaNumber:d.visa};void 0===a||null===a?u({variables:{data:Object(l.a)({},j)}}).then((function(e){var a,i,r=null===(a=e.data)||void 0===a||null===(i=a.createGuest)||void 0===i?void 0:i.guest;void 0!==r&&null!==r&&(t(r),ke.b.success("Host ".concat(r.name," ").concat(r.surname," p\u0159id\xe1n!"))),n()})):v({variables:{data:Object(l.a)({id:String(a.id)},j)}}).then((function(e){var a,i,r=null===(a=e.data)||void 0===a||null===(i=a.updateGuest)||void 0===i?void 0:i.guest;void 0!==r&&null!==r&&(t(r),ke.b.success("Host ".concat(r.name," ").concat(r.surname," aktualizov\xe1n!"))),n()}))})).catch((function(){return ke.b.error("Formul\xe1\u0159 nelze odeslat, opravte pros\xedm chyby")}))},type:"primary",children:void 0===a||null===a?"Vytvo\u0159it":"Upravit"})]}),footerStyle:{padding:"16px 20px",textAlign:"right"},children:Object(oe.jsx)(Ce.a,{active:!0,loading:j||O||x,paragraph:{rows:15},children:Object(oe.jsxs)(Ie.a,{form:o,initialValues:C,layout:"vertical",name:"guest",children:[Object(oe.jsx)(ve.a,{level:5,children:"Osobn\xed \xfadaje"}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Jm\xe9no",name:"name",required:!0,rules:ot.requiredAlphaRules,children:Object(oe.jsx)(Te.a,{placeholder:"Va\u0161e Jm\xe9no"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"P\u0159\xedjmen\xed",name:"surname",required:!0,rules:ot.requiredAlphaRules,children:Object(oe.jsx)(Te.a,{placeholder:"Va\u0161e P\u0159\xedjmen\xed"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"E-Mail",name:"email",required:!0,rules:[at.requiredRule],children:Object(oe.jsx)(Te.a,{addonBefore:N,placeholder:"e-mail",type:"email"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"\u010c\xedslo OP",name:"identity",children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo ob\u010dansk\xe9ho pr\u016fkazu"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Telefonn\xed \u010c\xedslo",name:"phone",children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"V\u011bk",name:"age",children:Object(oe.jsx)(Fe.a,{options:ot.ageOptions,placeholder:"vyberte ze seznamu"})}),Object(oe.jsx)(Ie.a.Item,{label:"Pohlav\xed",name:"gender",children:Object(oe.jsxs)(Fe.a,{placeholder:"vyberte ze seznamu",children:[Object(oe.jsx)(Fe.a.Option,{value:"M",children:"Mu\u017e"}),Object(oe.jsx)(Fe.a.Option,{value:"F",children:"\u017dena"})]})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"\u010c\xedslo viza",name:"visa",children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo visa"})}),Object(oe.jsx)(ve.a,{level:5,children:"Trval\xe9 bydli\u0161t\u011b"}),Object(oe.jsx)(Ie.a.Item,{label:"Ulice",name:["address","street"],children:Object(oe.jsx)(Te.a,{placeholder:"ulice"})}),Object(oe.jsx)(Ie.a.Item,{label:"PS\u010c/Obec",children:Object(oe.jsxs)(Te.a.Group,{compact:!0,children:[Object(oe.jsx)(Ie.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","psc"],children:Object(oe.jsx)(Te.a,{placeholder:"PS\u010c"})}),Object(oe.jsx)(Ie.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","municipality"],children:Object(oe.jsx)(Te.a,{placeholder:"Obec"})})]})}),Object(oe.jsx)(Ie.a.Item,{label:"Ob\u010danstv\xed",children:Object(oe.jsxs)(Te.a.Group,{compact:!0,children:[Object(oe.jsx)(Ie.a.Item,{style:{width:"50%"},name:["citizenship","selected"],children:Object(oe.jsxs)(Fe.a,{style:{width:"100%"},placeholder:"ze seznamu",children:[Object(oe.jsx)(Fe.a.Option,{value:"cze",children:"CZE"}),Object(oe.jsx)(Fe.a.Option,{value:"sk",children:"SK"})]})}),Object(oe.jsx)(Ie.a.Item,{style:{width:"50%"},name:["citizenship","new"],children:Object(oe.jsx)(Te.a,{placeholder:"ru\u010dn\u011b"})})]})})]})})})},jt=Object(ae.a)(Be||(Be=Object(ne.a)(["\n  query Guests {\n    guests {\n      age\n      addressMunicipality\n      addressPsc\n      addressStreet\n      citizenship\n      email\n      gender\n      identity\n      id\n      name\n      phoneNumber\n      surname\n      visaNumber\n    }\n  }\n"]))),bt=Object(ae.a)(Ve||(Ve=Object(ne.a)(["\n  mutation CreateReservation($data: ReservationInput!) {\n    createReservation(data: $data) {\n      reservation {\n        fromDate\n        id\n        guest {\n          id\n          name\n          surname\n        }\n        meal\n        notes\n        purpose\n        roommates {\n          id\n          name\n          surname\n        }\n        suite {\n          id\n          number\n          title\n        }\n        toDate\n        type\n      }\n    }\n  }\n"]))),mt=Object(ae.a)(Le||(Le=Object(ne.a)(["\n  mutation DeleteReservation($reservationId: ID!) {\n    deleteReservation(reservationId: $reservationId) {\n      reservation {\n        id\n      }\n    }\n  }\n"]))),vt=Object(ae.a)(_e||(_e=Object(ne.a)(["\n  mutation UpdateReservation($data: ReservationInput!) {\n    updateReservation(data: $data) {\n      reservation {\n        fromDate\n        id\n        guest {\n          id\n          name\n          surname\n        }\n        meal\n        notes\n        purpose\n        roommates {\n          id\n          name\n          surname\n        }\n        suite {\n          id\n          number\n          title\n        }\n        toDate\n        type\n      }\n    }\n  }\n"]))),Ot=["key","name","fieldKey"],ht=function(e){var t=e.addOrUpdateReservation,n=e.close,a=e.isOpen,i=e.clearReservation,r=e.reservation,s=Object(w.a)(bt),o=Object(I.a)(s,1)[0],c=Object(w.a)(mt),d=Object(I.a)(c,1)[0],u=Object(w.a)(vt),j=Object(I.a)(u,1)[0],b=Object(De.a)(jt),m=Object(I.a)(b,2),v=m[0],O=m[1],h=O.loading,p=O.data,f=Object(z.useState)(!1),x=Object(I.a)(f,2),g=x[0],y=x[1],k=Object(z.useState)(!1),S=Object(I.a)(k,2),C=S[0],N=S[1],F=Object(z.useState)([]),R=Object(I.a)(F,2),T=R[0],D=R[1],P=Ie.a.useForm(),A=Object(I.a)(P,1)[0],M=void 0!==r?{dates:[r.fromDate,r.toDate],guest:void 0===r.guest?null:r.guest.id,meal:r.meal,notes:r.notes,purpose:r.purpose,roommates:Array.from(r.roommates,(function(e){return{id:e.id}})),type:r.type}:{type:"NONBINDING"},E=function(e){return{label:"".concat(e.name," ").concat(e.surname),value:e.id}},G=function(){var e=A.getFieldsValue(!0),a=A.getFieldValue("dates"),i=Object(I.a)(a,2),s=i[0],c=i[1],d=void 0===e.roommates?[]:Array.from(e.roommates,(function(e){return e.id})),u={fromDate:s.format(q),guest:e.guest,meal:e.meal,notes:e.notes,purpose:e.purpose,roommates:d,suite:void 0!==r?+r.suite.id:null,toDate:c.format(q),type:e.type};void 0!==r&&void 0!==r.id?j({variables:{data:Object(l.a)({id:String(r.id)},u)}}).then((function(e){var a,i;t(null===(a=e.data)||void 0===a||null===(i=a.updateReservation)||void 0===i?void 0:i.reservation),ke.b.success("Rezervace byla aktualizov\xe1na!"),n()})):o({variables:{data:Object(l.a)({},u)}}).then((function(e){var a,i;t(null===(a=e.data)||void 0===a||null===(i=a.createReservation)||void 0===i?void 0:i.reservation),ke.b.success("Rezervace byla vytvo\u0159ena!"),n()}))},H=[void 0!==r&&void 0!==r.id?Object(oe.jsx)(Se.a,{cancelText:"Ne",okText:"Ano",onConfirm:function(){void 0!==r.id&&d({variables:{reservationId:String(r.id)}}).then((function(e){var t,a,r;i(null===(t=e.data)||void 0===t||null===(a=t.deleteReservation)||void 0===a||null===(r=a.reservation)||void 0===r?void 0:r.id),ke.b.success("Rezervace byla odstran\u011bna!"),n()}))},title:"Odstranit rezervaci?",children:Object(oe.jsx)(je.a,{className:"cancel-button",danger:!0,icon:Object(oe.jsx)(we.a,{}),children:"Odstranit"})},"remove"):null,Object(oe.jsx)(je.a,{onClick:function(){return N(!0)},children:"P\u0159idat hosta"},"guest"),Object(oe.jsx)(je.a,{icon:void 0===r?Object(oe.jsx)(Pe.a,{}):Object(oe.jsx)(Ae.a,{}),onClick:function(){A.validateFields().then(G)},type:"primary",children:void 0!==r&&void 0!==r.id?"Upravit":"Ulo\u017eit"},"create")];return Object(z.useEffect)((function(){!0===a&&(A.resetFields(),v())}),[A,v,a,r]),Object(z.useEffect)((function(){if(void 0!==p&&null!==p.guests){var e=[];p.guests.forEach((function(t){null!==t&&e.push(E(t))})),D(e)}}),[p]),Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(ze.a,{closeIcon:Object(oe.jsx)(Se.a,{onCancel:function(){return y(!1)},onConfirm:n,title:"Zav\u0159\xedt formul\xe1\u0159? Data ve formul\xe1\u0159i budou ztracena",visible:g,children:Object(oe.jsx)(Me.a,{onClick:function(){A.isFieldsTouched()?y(!0):(y(!1),n())}})}),footer:H,title:"Rezerva\u010dn\xed formul\xe1\u0159",visible:a,children:Object(oe.jsx)(Ce.a,{active:!0,loading:h,paragraph:{rows:5},children:Object(oe.jsxs)(Ie.a,{form:A,initialValues:M,layout:"vertical",children:[Object(oe.jsx)(Ie.a.Item,{label:"Datum Rezervace",name:"dates",required:!0,children:Object(oe.jsx)(Ne.a.RangePicker,{format:q,showTime:!0})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Host",name:"guest",required:!0,rules:nt.guestValidators(A),children:Object(oe.jsx)(Fe.a,{filterOption:function(e,t){var n,a=null===t||void 0===t||null===(n=t.label)||void 0===n?void 0:n.toString().toLowerCase().indexOf(e.toLowerCase());return void 0!==a&&a>=0},options:T,showSearch:!0})}),Object(oe.jsx)(Ie.a.List,{name:"roommates",children:function(e,t){var n=t.add,a=t.remove;return Object(oe.jsxs)(oe.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,r=Object(ye.a)(e,Ot);return Object(oe.jsxs)(Re.b,{align:"baseline",className:"roommate-list",children:[Object(oe.jsx)(Ie.a.Item,Object(l.a)(Object(l.a)({hasFeedback:!0},r),{},{fieldKey:[i,"first"],name:[n,"id"],rules:nt.roommateValidators(A),children:Object(oe.jsx)(Fe.a,{options:T,showSearch:!0})})),Object(oe.jsx)(Ee.a,{onClick:function(){a(n),A.validateFields()}})]},t)})),Object(oe.jsx)(Ie.a.Item,{children:Object(oe.jsx)(je.a,{disabled:e.length>=T.length,type:"dashed",onClick:function(){return n()},block:!0,icon:Object(oe.jsx)(Ge.a,{}),children:"P\u0159idat spolubydl\xedc\xedho"})})]})}}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Typ Rezervace",name:"type",required:!0,rules:[nt.getRequiredRule("vyberte typ rezervace")],children:Object(oe.jsx)(Fe.a,{options:nt.reservationOptions})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Strava",name:"meal",required:!0,rules:[at.requiredRule],children:Object(oe.jsx)(Fe.a,{options:nt.mealOptions})}),Object(oe.jsx)(Ie.a.Item,{label:"\xda\u010del pobytu",name:"purpose",children:Object(oe.jsx)(Te.a,{placeholder:"\xfa\u010del pobytu"})}),Object(oe.jsx)(Ie.a.Item,{label:"Pozn\xe1mky",name:"notes",children:Object(oe.jsx)(Te.a.TextArea,{placeholder:"zadejte text",allowClear:!0})})]})})}),Object(oe.jsx)(ut,{close:function(){return N(!1)},addGuest:function(e){D(T.concat(E(e)))},visible:C})]})},pt=n(522),ft=Object(ae.a)(Je||(Je=Object(ne.a)(["\n  query Suites {\n    suites {\n      id\n      title\n      number\n    }\n  }\n"]))),xt=Object(ae.a)(Xe||(Xe=Object(ne.a)(["\n  query SuitesWithReservations {\n    guests {\n      id\n      name\n      surname\n    }\n    suites {\n      id\n      number\n      title\n    }\n    reservations {\n      fromDate\n      id\n      guest {\n        id\n        name\n        surname\n      }\n      meal\n      notes\n      purpose\n      roommates {\n        id\n        name\n        surname\n      }\n      suite {\n        id\n      }\n      toDate\n      type\n    }\n  }\n"]))),gt=Object(C.g)((function(e){var t=e.setPageTitle,n=Object(z.useState)([]),a=Object(I.a)(n,2),i=a[0],r=a[1],s=Object(z.useState)([]),o=Object(I.a)(s,2),c=o[0],d=o[1],u=Object(z.useState)(),j=Object(I.a)(u,2),b=j[0],m=j[1],O=Object(z.useState)(!1),h=Object(I.a)(O,2),p=h[0],f=h[1],x=Object(z.useState)(!0),g=Object(I.a)(x,2),y=g[0],k=g[1],S=Object(pt.a)(xt,{onCompleted:function(){t(L),k(!1)}}).data,C=function(e){return{color:E.getReservationColor(e.type),end_time:v()(e.toDate),group:e.suite.id,guest:e.guest,id:e.id,itemProps:{className:"reservation-item",style:{background:E.getReservationColor(e.type),border:"none"}},meal:e.meal,notes:e.notes,purpose:e.purpose,roommates:e.roommates,start_time:v()(e.fromDate),suite:e.suite,title:"".concat(e.guest.name," ").concat(e.guest.surname),type:e.type}};Object(z.useEffect)((function(){var e,t,n=[],a=[];null===S||void 0===S||null===(e=S.suites)||void 0===e||e.forEach((function(e){null!==e&&a.push(e)})),null===S||void 0===S||null===(t=S.reservations)||void 0===t||t.forEach((function(e){null!==e&&n.push(C(e))})),d(n),r(a)}),[S]);return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Ce.a,{active:!0,loading:y,paragraph:{rows:5},children:Object(oe.jsxs)(he.a,{canChangeGroup:!1,canMove:!1,canResize:!1,defaultTimeEnd:v()().add(12,"day"),defaultTimeStart:v()().add(-12,"day"),groupRenderer:function(e){var t=e.group;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(ve.a,{level:5,children:t.title})})},groups:i,itemRenderer:function(e){return Object(oe.jsx)(ge,Object(l.a)({},e))},items:c,lineHeight:60,onCanvasClick:function(e,t){var n=i.find((function(t){return t.id===e}));void 0!==n&&(m({fromDate:v()(t),suite:Object(l.a)({},n),roommates:[],toDate:v()(t).add(1,"day"),type:"NONBINDING"}),f(!0))},onItemClick:function(e){var t=c.find((function(t){return t.id===e}));void 0!==t&&(m({fromDate:v()(t.start_time),guest:t.guest,id:t.id,meal:t.meal,notes:t.notes,purpose:t.purpose,roommates:t.roommates,suite:t.suite,toDate:v()(t.end_time),type:t.type}),f(!0))},children:[Object(oe.jsxs)(Oe.TimelineHeaders,{children:[Object(oe.jsx)(Oe.SidebarHeader,{children:function(e){var t=e.getRootProps;return Object(oe.jsx)("div",Object(l.a)(Object(l.a)({},t()),{},{className:"side-header"}))}}),Object(oe.jsx)(Oe.DateHeader,{unit:"primaryHeader"}),Object(oe.jsx)(Oe.DateHeader,{className:"days",unit:"day"})]}),Object(oe.jsx)(Oe.CursorMarker,{children:function(e){var t=e.styles,n=e.date;return Object(oe.jsx)("div",{style:Object(l.a)(Object(l.a)({},t),{},{backgroundColor:"rgba(136, 136, 136, 0.5)",color:"#888"}),children:Object(oe.jsx)("div",{className:"rt-marker__label",children:Object(oe.jsx)("div",{className:"rt-marker__content",children:v()(n).format("DD MMM HH:mm")})})})}})]})}),Object(oe.jsx)(ht,{addOrUpdateReservation:function(e){if(void 0!==e&&null!==e){var t=c.filter((function(t){return t.id!==e.id}));d(t.concat(C(e)))}},close:function(){m(void 0),f(!1)},isOpen:p,clearReservation:function(e){void 0!==e&&null!==e&&d(c.filter((function(t){return t.id!==e}))),m(void 0)},reservation:b})]})})),yt=n(526),It=(n(499),function(e){var t=e.guest,n=e.openGuestDrawer,a=e.selectGuest;return Object(oe.jsx)(yt.b.Item,{actions:[Object(oe.jsx)(je.a,{onClick:function(){a(t),n()},type:"link",children:"upravit"},"edit")],children:Object(oe.jsx)(yt.b.Item.Meta,{avatar:Object(oe.jsx)(P.a,{gap:4,size:"large",style:{backgroundColor:E.getRandomColor()},children:t.name.substring(0,1).toUpperCase()}),description:t.email,title:"".concat(t.name," ").concat(t.surname)})})}),kt=Object(C.g)((function(e){var t=e.setPageTitle,n=Object(z.useState)(!0),a=Object(I.a)(n,2),i=a[0],r=a[1],s=Object(z.useState)(!1),o=Object(I.a)(s,2),c=o[0],l=o[1],d=Object(z.useState)([]),u=Object(I.a)(d,2),j=u[0],b=u[1],m=Object(z.useState)(null),v=Object(I.a)(m,2),O=v[0],h=v[1],p=Object(pt.a)(jt,{onCompleted:function(){r(!1),t(V)}}).data;Object(z.useEffect)((function(){var e=[];void 0!==p&&null!==(null===p||void 0===p?void 0:p.guests)&&(p.guests.forEach((function(t){null!==t&&e.push(t)})),b(e))}),[p]);return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Ce.a,{active:!0,loading:i,paragraph:{rows:5},children:Object(oe.jsx)(yt.b,{bordered:!0,className:"guests-list",dataSource:j,footer:Object(oe.jsx)(je.a,{icon:Object(oe.jsx)(Pe.a,{}),onClick:function(){h(null),l(!0)},type:"primary",children:"P\u0159idat hosta"}),header:Object(oe.jsx)("h4",{children:"Seznam host\u016f"}),itemLayout:"horizontal",renderItem:function(e){return Object(oe.jsx)(It,{guest:e,openGuestDrawer:function(){return l(!0)},selectGuest:h})}})}),Object(oe.jsx)(ut,{addGuest:function(e){var t=j.filter((function(t){return t.id!==e.id}));b(t.concat(e))},close:function(){return l(!1)},guest:O,removeGuest:function(e){return b(j.filter((function(t){return t.id!==e})))},visible:c})]})})),St=Object(ae.a)(Ze||(Ze=Object(ne.a)(["\n  mutation CreateSuite($data: SuiteInput!) {\n    createSuite(data: $data) {\n      suite {\n        id\n        number\n        title\n      }\n    }\n  }\n"]))),zt=Object(ae.a)(Ke||(Ke=Object(ne.a)(["\n  mutation UpdateSuite($data: SuiteInput!) {\n    updateSuite(data: $data) {\n      suite {\n        id\n        number\n        title\n      }\n    }\n  }\n"]))),Ct=Object(ae.a)(Ye||(Ye=Object(ne.a)(["\n  mutation DeleteSuite($suiteId: ID!) {\n    deleteSuite(suiteId: $suiteId) {\n      suite {\n        id\n      }\n    }\n  }\n"]))),Nt=function(e){var t=e.addOrUpdateSuite,n=e.clearSuite,a=e.close,i=e.suite,r=e.visible,s=Object(w.a)(St),o=Object(I.a)(s,2),c=o[0],d=o[1].loading,u=Object(w.a)(Ct),j=Object(I.a)(u,2),b=j[0],m=j[1].loading,v=Object(w.a)(zt),O=Object(I.a)(v,2),h=O[0],p=O[1].loading,f=Ie.a.useForm(),x=Object(I.a)(f,1)[0],g=Object(z.useState)(!1),y=Object(I.a)(g,2),k=y[0],S=y[1],C={number:null===i||void 0===i?void 0:i.number,title:null===i||void 0===i?void 0:i.title};return Object(z.useEffect)((function(){!0===r&&x.resetFields()}),[x,r]),Object(oe.jsx)(it.a,{closeIcon:Object(oe.jsx)(Se.a,{onCancel:function(){return S(!1)},onConfirm:function(){S(!1),a()},placement:"rightTop",title:"Zav\u0159\xedt formul\xe1\u0159? Data ve formul\xe1\u0159i budou ztracena",visible:k,children:Object(oe.jsx)(Me.a,{onClick:function(){x.isFieldsTouched()?S(!0):a()}})}),footer:Object(oe.jsxs)(oe.Fragment,{children:[void 0!==i&&Object(oe.jsx)(Se.a,{cancelText:"Ne",icon:Object(oe.jsx)(st.a,{}),okText:"Ano",onConfirm:function(){b({variables:{suiteId:i.id}}).then((function(e){var t,i,r,s=null===(t=e.data)||void 0===t||null===(i=t.deleteSuite)||void 0===i||null===(r=i.suite)||void 0===r?void 0:r.id;void 0!==s&&(n(s),ke.b.success("Apartm\xe1 byla odstran\u011bna"),a())}))},title:"opravdu odstranit?",children:Object(oe.jsx)(je.a,{danger:!0,style:{float:"left"},type:"primary",children:"Odstranit"})}),Object(oe.jsx)(je.a,{onClick:function(){x.validateFields().then((function(){var e=x.getFieldsValue(!0),n={number:e.number,title:e.title};void 0===i?c({variables:{data:Object(l.a)({},n)}}).then((function(e){var n,i,r=null===(n=e.data)||void 0===n||null===(i=n.createSuite)||void 0===i?void 0:i.suite;void 0!==r&&null!==r&&(t(r),ke.b.success("Apartm\xe1 byla vytvo\u0159ena"),a())})):h({variables:{data:Object(l.a)({id:i.id},n)}}).then((function(e){var n,i,r=null===(n=e.data)||void 0===n||null===(i=n.updateSuite)||void 0===i?void 0:i.suite;void 0!==r&&null!==r&&(t(r),ke.b.success("Apartm\xe1 byla aktualizov\xe1na"),a())}))})).catch((function(){console.error("Form validation failed")}))},type:"primary",children:void 0===i?"Vytvo\u0159it":"Upravit"})]}),footerStyle:{textAlign:"right"},placement:"left",title:"Nov\xe9 apartm\xe1",visible:r,width:500,children:Object(oe.jsx)(A.a,{size:"large",spinning:d||m||p,tip:"Na\u010d\xedt\xe1m...",children:Object(oe.jsxs)(Ie.a,{form:x,initialValues:C,layout:"vertical",name:"suite",children:[Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"N\xe1zev",name:"title",required:!0,rules:[at.requiredRule],children:Object(oe.jsx)(Te.a,{placeholder:"n\xe1zev apartm\xe1"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"\u010c\xedslo",name:"number",required:!0,rules:[at.requiredRule,{message:"zadejte \u010d\xedslo",pattern:/^[0-9]+$/}],children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo apartm\xe1",type:"number"})})]})})})},Ft=(n(500),function(e){var t=e.onAdd;return Object(oe.jsx)(je.a,{icon:Object(oe.jsx)(Pe.a,{}),onClick:t,type:"primary",children:"P\u0159idat apartm\xe1"})}),Rt=Object(C.g)((function(e){var t=e.setPageTitle,n=Object(z.useState)(!0),a=Object(I.a)(n,2),i=a[0],r=a[1],s=Object(z.useState)(!1),o=Object(I.a)(s,2),c=o[0],l=o[1],d=Object(z.useState)(),u=Object(I.a)(d,2),j=u[0],b=u[1],m=Object(z.useState)([]),v=Object(I.a)(m,2),O=v[0],h=v[1],p=Object(pt.a)(ft,{onCompleted:function(){r(!1),t(J)}}).data;return Object(z.useEffect)((function(){var e,t=[];null===p||void 0===p||null===(e=p.suites)||void 0===e||e.forEach((function(e){null!==e&&t.push(e)})),h(t)}),[p]),Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Ce.a,{active:!0,loading:i,paragraph:{rows:5},children:Object(oe.jsx)(yt.b,{bordered:!0,className:"suites-list",dataSource:O,footer:Object(oe.jsx)(Ft,{onAdd:function(){b(void 0),l(!0)}}),header:Object(oe.jsx)("h4",{children:"Seznam apartm\xe1"}),itemLayout:"horizontal",renderItem:function(e){return Object(oe.jsx)(yt.b.Item,{actions:[Object(oe.jsx)(je.a,{onClick:function(){b(e),l(!0)},type:"link",children:"upravit"},"edit")],children:Object(oe.jsx)(yt.b.Item.Meta,{avatar:Object(oe.jsx)(P.a,{gap:4,size:"large",children:Object(oe.jsx)(T.a,{})}),description:"\u010d\xedslo pokoje - ".concat(e.number),title:e.title})})}})}),Object(oe.jsx)(Nt,{addOrUpdateSuite:function(e){h(O.filter((function(t){return t.id!==e.id})).concat(e))},clearSuite:function(e){h(O.filter((function(t){return t.id!==e})))},close:function(){return l(!1)},suite:j,visible:c})]})})),Tt=(n(501),{labelCol:{lg:8,md:8,sm:8},wrapperCol:{lg:16,md:16,sm:16}}),Dt={wrapperCol:{lg:{offset:8,span:16},xs:{offset:0,span:24}}},wt=Object(C.g)((function(e){var t=e.history,n=e.setPageTitle,a=Object(w.a)(ie,{onCompleted:function(e){null!==e.tokenAuth&&(localStorage.setItem(ee,e.tokenAuth.token),localStorage.setItem(Q,e.tokenAuth.refreshToken),localStorage.setItem(te,e.tokenAuth.payload.username),localStorage.setItem("tokenExpiresIn",e.tokenAuth.payload.exp),localStorage.setItem("refreshTokenExpiresIn",e.tokenAuth.refreshExpiresIn.toString()),t.push(G()))},onError:function(e){switch(e.message){case H:ke.b.error("Pros\xedm zadejte platn\xe9 p\u0159ihla\u0161ovac\xed \xfadaje");break;default:ke.b.error("Chyba serveru, kontaktujte spr\xe1vce")}}}),i=Object(I.a)(a,2),r=i[0],s=i[1].loading;Object(z.useEffect)((function(){n("P\u0159ihl\xe1\u0161en\xed")}),[t,n]);var o=Ie.a.useForm(),c=Object(I.a)(o,1)[0];return Object(oe.jsx)(k.a.Content,{children:Object(oe.jsx)(A.a,{spinning:s,tip:"P\u0159ihla\u0161ov\xe1n\xed...",children:Object(oe.jsxs)(Ie.a,Object(l.a)(Object(l.a)({},Tt),{},{className:"login",form:c,name:"login",onFinish:function(e){r({variables:{password:e.password.trim(),username:e.username.trim()}})},children:[Object(oe.jsx)(Ie.a.Item,{label:"Jm\xe9no",name:"username",rules:[at.requiredRule],children:Object(oe.jsx)(Te.a,{type:"text",placeholder:"u\u017eivatelsk\xe9 jm\xe9no"})}),Object(oe.jsx)(Ie.a.Item,{label:"Heslo",name:"password",rules:[at.requiredRule],children:Object(oe.jsx)(Te.a,{type:"password",placeholder:"heslo"})}),Object(oe.jsxs)(Ie.a.Item,Object(l.a)(Object(l.a)({},Dt),{},{children:[Object(oe.jsx)(je.a,{type:"default",htmlType:"button",onClick:function(){return c.resetFields()},children:"Reset"}),Object(oe.jsx)(je.a,{type:"primary",htmlType:"submit",children:"P\u0159ihl\xe1sit"})]}))]}))})})})),Pt=Object(ae.a)(We||(We=Object(ne.a)(["\n  query ReservationGuests($reservationHash: String!) {\n    reservationGuests(reservationHash: $reservationHash) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n      roommates {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"]))),At=Object(ae.a)(Qe||(Qe=Object(ne.a)(["\n  mutation CreateContactMessage($data: ContactInput!) {\n    createContactMessage(data: $data) {\n      contact {\n        message\n      }\n    }\n  }\n"]))),Mt=function(e){var t=e.show,n=Object(w.a)(At),a=Object(I.a)(n,2),i=a[0],r=a[1].loading,s=Ie.a.useForm(),o=Object(I.a)(s,1)[0];return!0===t?Object(oe.jsx)(A.a,{spinning:r,tip:"Pos\xedl\xe1m zpr\xe1vu",children:Object(oe.jsx)(ue.a,{status:"error",title:"Rezervace nenalezena",subTitle:"Zanechte n\xe1m pros\xedm zpr\xe1vu, nebo n\xe1m zavolejte na +420 XXX XXX XXX",extra:Object(oe.jsxs)(Ie.a,{form:o,name:"contact",onFinish:function(){o.validateFields().then((function(){i({variables:{data:{message:o.getFieldValue("message")}}}).then((function(){ke.b.success("Va\u0161e zpr\xe1va byla odesl\xe1na, d\u011bkujeme!"),o.resetFields()}))})).catch((function(){return ke.b.error("Formul\xe1\u0159 nelze odeslat, opravte pros\xedm chyby")}))},wrapperCol:{offset:6,span:12},children:[Object(oe.jsx)(Ie.a.Item,{name:"message",rules:[{required:!0,message:"Zadejte text zpr\xe1vy"}],children:Object(oe.jsx)(Te.a.TextArea,{rows:4})}),Object(oe.jsx)(Ie.a.Item,{children:Object(oe.jsx)(je.a,{type:"primary",htmlType:"submit",children:"Odeslat"})})]})})}):null},Et=function(e){var t=e.guest,n=e.loading,a=e.openDrawer;return void 0===t?null:Object(oe.jsx)(yt.b,{bordered:!0,className:"guests-list",dataSource:t,header:Object(oe.jsx)("h4",{children:"Host"}),itemLayout:"horizontal",renderItem:function(e){return Object(oe.jsx)(yt.b.Item,{actions:n?[]:[Object(oe.jsx)(je.a,{onClick:function(){a(e)},type:"link",children:"upravit"},"edit")],children:Object(oe.jsx)(yt.b.Item.Meta,{avatar:Object(oe.jsx)(P.a,{gap:4,size:"large",style:{backgroundColor:E.getRandomColor()},children:e.name.substring(0,1).toUpperCase()}),description:e.email,title:"".concat(e.name," ").concat(e.surname)})},e.id)}})},Gt=Object(ae.a)(et||(et=Object(ne.a)(["\n  mutation UpdateReservationGuest($data: ReservationGuestInput!) {\n    updateReservationGuest(data: $data) {\n      guest {\n        addressMunicipality\n        addressPsc\n        addressStreet\n        age\n        citizenship\n        email\n        gender\n        identity\n        id\n        name\n        phoneNumber\n        surname\n        visaNumber\n      }\n    }\n  }\n"]))),qt=function(e){var t=e.close,n=e.guest,a=e.reservationHash,i=e.visible,r=Object(w.a)(Gt),s=Object(I.a)(r,2),o=s[0],c=s[1].loading,d=Object(z.useState)(!1),u=Object(I.a)(d,2),j=u[0],b=u[1],m=Ie.a.useForm(),v=Object(I.a)(m,1)[0],O={age:null===n||void 0===n?void 0:n.age,address:{municipality:null===n||void 0===n?void 0:n.addressMunicipality,psc:null===n||void 0===n?void 0:n.addressPsc,street:null===n||void 0===n?void 0:n.addressStreet},citizenship:{selected:null===n||void 0===n?void 0:n.citizenship},email:null===n||void 0===n?void 0:n.email,gender:null===n||void 0===n?void 0:n.gender,identity:null===n||void 0===n?void 0:n.identity,name:null===n||void 0===n?void 0:n.name,phone:null===n||void 0===n?void 0:n.phoneNumber,surname:null===n||void 0===n?void 0:n.surname,visa:null===n||void 0===n?void 0:n.visaNumber},h=Object(oe.jsx)(Ie.a.Item,{name:"email-prefix",noStyle:!0,children:Object(oe.jsx)(rt.a,{})});return Object(z.useEffect)((function(){!0===i&&v.resetFields()}),[v,i]),void 0===n?null:Object(oe.jsx)(it.a,{closeIcon:Object(oe.jsx)(Se.a,{onCancel:function(){return b(!1)},onConfirm:function(){b(!1),v.resetFields(),t()},placement:"rightTop",title:"Zav\u0159\xedt formul\xe1\u0159? Data ve formul\xe1\u0159i budou ztracena",visible:j,children:Object(oe.jsx)(Me.a,{onClick:function(){v.isFieldsTouched()?b(!0):t()}})}),placement:"left",title:"Nov\xfd host",width:500,visible:i,footer:Object(oe.jsx)(je.a,{onClick:function(){v.validateFields().then((function(){var e,i,r,s,c,d=v.getFieldsValue(!0),u={age:d.age,addressMunicipality:null===(e=d.address)||void 0===e?void 0:e.municipality,addressPsc:null===(i=d.address)||void 0===i?void 0:i.psc,addressStreet:null===(r=d.address)||void 0===r?void 0:r.street,citizenship:void 0===(null===(s=d.citizenship)||void 0===s?void 0:s.selected)?null===(c=d.citizenship)||void 0===c?void 0:c.new:d.citizenship.selected,email:d.email,gender:d.gender,identity:d.identity,name:d.name,phoneNumber:d.phone,surname:d.surname,visaNumber:d.visa};o({variables:{data:Object(l.a)({id:String(null===n||void 0===n?void 0:n.id),hash:a},u)}}).then((function(e){var n,a,i=null===(n=e.data)||void 0===n||null===(a=n.updateReservationGuest)||void 0===a?void 0:a.guest;void 0!==i&&null!==i&&ke.b.success("Host ".concat(i.name," ").concat(i.surname," aktualizov\xe1n!")),t()})).catch((function(e){return ke.b.error(e.message)}))})).catch((function(){return ke.b.error("Formul\xe1\u0159 nelze odeslat, opravte pros\xedm chyby")}))},type:"primary",children:"Ulo\u017eit"}),footerStyle:{padding:"16px 20px",textAlign:"right"},children:Object(oe.jsx)(Ce.a,{active:!0,loading:c,paragraph:{rows:15},children:Object(oe.jsxs)(Ie.a,{form:v,initialValues:O,layout:"vertical",name:"guest",children:[Object(oe.jsx)(ve.a,{level:5,children:"Osobn\xed \xfadaje"}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Jm\xe9no",name:"name",required:!0,rules:ot.requiredAlphaRules,children:Object(oe.jsx)(Te.a,{placeholder:"Va\u0161e Jm\xe9no"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"P\u0159\xedjmen\xed",name:"surname",required:!0,rules:ot.requiredAlphaRules,children:Object(oe.jsx)(Te.a,{placeholder:"Va\u0161e P\u0159\xedjmen\xed"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"E-Mail",name:"email",required:!0,rules:[at.requiredRule],children:Object(oe.jsx)(Te.a,{addonBefore:h,placeholder:"e-mail",type:"email"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"\u010c\xedslo OP",name:"identity",children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo ob\u010dansk\xe9ho pr\u016fkazu"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"Telefonn\xed \u010c\xedslo",name:"phone",children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo"})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"V\u011bk",name:"age",children:Object(oe.jsx)(Fe.a,{options:ot.ageOptions,placeholder:"vyberte ze seznamu"})}),Object(oe.jsx)(Ie.a.Item,{label:"Pohlav\xed",name:"gender",children:Object(oe.jsxs)(Fe.a,{placeholder:"vyberte ze seznamu",children:[Object(oe.jsx)(Fe.a.Option,{value:"M",children:"Mu\u017e"}),Object(oe.jsx)(Fe.a.Option,{value:"F",children:"\u017dena"})]})}),Object(oe.jsx)(Ie.a.Item,{hasFeedback:!0,label:"\u010c\xedslo viza",name:"visa",children:Object(oe.jsx)(Te.a,{placeholder:"\u010d\xedslo visa"})}),Object(oe.jsx)(ve.a,{level:5,children:"Trval\xe9 bydli\u0161t\u011b"}),Object(oe.jsx)(Ie.a.Item,{label:"Ulice",name:["address","street"],children:Object(oe.jsx)(Te.a,{placeholder:"ulice"})}),Object(oe.jsx)(Ie.a.Item,{label:"PS\u010c/Obec",children:Object(oe.jsxs)(Te.a.Group,{compact:!0,children:[Object(oe.jsx)(Ie.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","psc"],children:Object(oe.jsx)(Te.a,{placeholder:"PS\u010c"})}),Object(oe.jsx)(Ie.a.Item,{style:{marginBottom:0,width:"50%"},name:["address","municipality"],children:Object(oe.jsx)(Te.a,{placeholder:"Obec"})})]})}),Object(oe.jsx)(Ie.a.Item,{label:"Ob\u010danstv\xed",children:Object(oe.jsxs)(Te.a.Group,{compact:!0,children:[Object(oe.jsx)(Ie.a.Item,{style:{width:"50%"},name:["citizenship","selected"],children:Object(oe.jsxs)(Fe.a,{style:{width:"100%"},placeholder:"ze seznamu",children:[Object(oe.jsx)(Fe.a.Option,{value:"cze",children:"CZE"}),Object(oe.jsx)(Fe.a.Option,{value:"sk",children:"SK"})]})}),Object(oe.jsx)(Ie.a.Item,{style:{width:"50%"},name:["citizenship","new"],children:Object(oe.jsx)(Te.a,{placeholder:"ru\u010dn\u011b"})})]})})]})})})},Ht=function(e){var t=e.loading,n=e.openDrawer,a=e.roommates;return void 0===a?null:Object(oe.jsx)(yt.b,{bordered:!0,className:"guests-list",dataSource:a,header:Object(oe.jsx)("h4",{children:"Spolubydl\xedc\xed"}),itemLayout:"horizontal",renderItem:function(e){return Object(oe.jsx)(yt.b.Item,{actions:t?[]:[Object(oe.jsx)(je.a,{onClick:function(){n(e)},type:"link",children:"upravit"},"edit")],children:Object(oe.jsx)(yt.b.Item.Meta,{avatar:Object(oe.jsx)(P.a,{gap:4,size:"large",style:{backgroundColor:E.getRandomColor()},children:e.name.substring(0,1).toUpperCase()}),description:e.email,title:"".concat(e.name," ").concat(e.surname)})},e.id)}})},$t=function(e){var t=e.setPageTitle,n=Object(C.f)().hash,a=Object(z.useState)(),i=Object(I.a)(a,2),r=i[0],s=i[1],o=Object(z.useState)(),c=Object(I.a)(o,2),l=c[0],d=c[1],u=Object(z.useState)(),j=Object(I.a)(u,2),b=j[0],m=j[1],v=Object(z.useState)(!1),O=Object(I.a)(v,2),h=O[0],p=O[1],f=Object(z.useState)(!1),x=Object(I.a)(f,2),g=x[0],y=x[1],k=Object(pt.a)(Pt,{variables:{reservationHash:n},onCompleted:function(){t(_),y(!1)},onError:function(){t(null),y(!0)}}),S=k.loading,N=k.data;return Object(z.useEffect)((function(){var e,t,n=[],a=null===N||void 0===N||null===(e=N.reservationGuests)||void 0===e?void 0:e.guest,i=null===N||void 0===N||null===(t=N.reservationGuests)||void 0===t?void 0:t.roommates;void 0!==a&&null!==a&&s([a]),void 0!==i&&null!==i&&(i.forEach((function(e){null!==e&&n.push(e)})),d(n))}),[N]),Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsxs)(A.a,{spinning:S,children:[Object(oe.jsx)(Et,{guest:r,loading:S,openDrawer:function(e){m(e),p(!0)}}),Object(oe.jsx)(Ht,{loading:S,openDrawer:function(e){m(e),p(!0)},roommates:l}),Object(oe.jsx)(Mt,{show:g})]}),Object(oe.jsx)(qt,{close:function(){return p(!1)},guest:b,reservationHash:n,visible:h})]})},Ut=function(e){var t=e.title;return null===t?null:Object(oe.jsx)(ve.a,{level:3,style:{borderBottom:"1px solid #e1e1e1",paddingBottom:".3em"},children:t})},Bt=function(){var e=Object(z.useState)("Na\u010d\xedt\xe1m..."),t=Object(I.a)(e,2),n=t[0],a=t[1];return Object(oe.jsxs)(k.a,{id:"app",children:[Object(oe.jsx)(S.a,{offsetTop:0,className:"app__affix-header",children:Object(oe.jsx)(de,{})}),Object(oe.jsx)(k.a.Header,{children:Object(oe.jsx)(Ut,{title:n})}),Object(oe.jsx)(k.a.Content,{className:"app-content",children:Object(oe.jsxs)(C.c,{children:[Object(oe.jsx)(C.a,{exact:!0,path:Y,children:Object(oe.jsx)(gt,{setPageTitle:a})}),Object(oe.jsx)(C.a,{exact:!0,path:W,children:Object(oe.jsx)(Rt,{setPageTitle:a})}),Object(oe.jsx)(C.a,{exact:!0,path:X,children:Object(oe.jsx)(kt,{setPageTitle:a})}),Object(oe.jsx)(C.a,{exact:!0,path:Z,children:Object(oe.jsx)(wt,{setPageTitle:a})}),Object(oe.jsx)(C.a,{exact:!0,path:K,children:Object(oe.jsx)($t,{setPageTitle:a})}),Object(oe.jsx)(C.a,{path:"*",children:Object(oe.jsx)(be,{})})]})})]})},Vt=n(16),Lt=n(274),_t=n.n(Lt);v.a.locale("cs");var Jt=new O.a({uri:"/api"}),Xt=new h.ApolloLink((function(e,t){var n=localStorage.getItem(ee),a=b("csrftoken");return e.setContext((function(e){var t=e.headers,i=void 0===t?{}:t;return{headers:Object(l.a)(Object(l.a)({},i),{},{Authorization:null===n?"":"JWT ".concat(n),"X-CSRFToken":null===a?"":a})}})),t(e)})),Zt=Object(y.a)((function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation,i=e.forward;if(t){var r,s=Object(c.a)(t);try{for(s.s();!(r=s.n()).done;){switch(r.value.message){case U:return Object(p.a)(tt.mutate({mutation:re,variables:{refreshToken:localStorage.getItem(Q)}}).then((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.refreshToken})).catch((function(e){return console.error(e)}))).flatMap((function(e){var t=e;return localStorage.setItem(ee,t.token),localStorage.setItem(Q,t.refreshToken),localStorage.setItem(te,t.payload.username),localStorage.setItem("tokenExpiresIn",t.payload.exp.toString()),localStorage.setItem("refreshTokenExpiresIn",t.refreshExpiresIn.toString()),i(a)}));case $:case B:localStorage.removeItem(ee),localStorage.removeItem(Q),localStorage.removeItem(te),window.location.replace(Z)}}}catch(o){s.e(o)}finally{s.f()}}n&&console.error(n)}));tt=new f.a({cache:new x.a({typePolicies:{Query:{fields:{guests:{merge:!1},reservations:{merge:!1},suiteReservations:{merge:!1},suites:{merge:!1}}},Reservation:{fields:{roommates:{merge:!1}}}}}),link:Object(h.from)([Zt,Xt,Jt])}),u.a.render(Object(oe.jsx)(g.a,{client:tt,children:Object(oe.jsx)(Vt.a,{locale:_t.a,children:Object(oe.jsx)(j.a,{children:Object(oe.jsx)(Bt,{})})})}),document.getElementById("root"))}},[[507,1,2]]]);
//# sourceMappingURL=main.1fbdcdfa.chunk.js.map